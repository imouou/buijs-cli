/*!
 *  BUI 简介 
 *  
 *  v1.3.3 date: 2017-4-26
 *  
 *  BUI 是 Button UI 的简称, BUI是一种场景式UI框架,
 *  以按钮为中心, 在按钮的基础上嵌入布局扩展大量的常用控件, 
 *  只要进行简单的组装,就能快速开发应用,
 *  并能保持PC跟手机端的调试一致,效果一致,开发一致.
 *  
 *  BUI 专注于移动开发体验(包括不限于Bingotouch,link,微信,及webapp开发)
 *  -----------------------------------------------------------
 *  BUI Team
 *  部门: 政企体验创新部
 *  产品经理: 区柏荣
 *  代码设计: 王伟深 杨俊标
 *  产品设计师: 邝德如 范菊 唐竹晗
 *  -----------------------------------------------------------
 *  BUI 反馈邮箱: wangwsh@bingosoft.net
 *
 *  Copyright (c) 2016-2017
 */
var libs=window.Zepto||window.jQuery,bui=function(e,t){var n={};return n.debug=!0,n.currentPlatform="",n.log=!0,n["debugger"]=!1,n["native"]={},n.config={},n.config.namespace="bui",n.config.classNamePrefix=n.config.namespace+"-",n.config.version="1.3.3",n.config.versionCode=20170426,n.config.viewport={zoom:!0},n.config.init={auto:!0},n.config.ready={},n.config.ajax={},n.config.back={},n.config.load={},n.config.getPageParams={},n.config.refresh={},n.config.run={},n.config.checkVersion={},n.config.dialog={},n.config.confirm={},n.config.alert={},n.config.hint={},n.config.loading={},n.config.mask={},n.config.list={},n.config.listview={},n.config.scroll={},n.config.pullrefresh={},n.config.select={},n.config.sidebar={},n.config.slide={},n.config.actionsheet={},n.config.dropdown={},n.config.accordion={},n.config.stepbar={},n.config.rating={},n.config.number={},n.config.file={},n.config.fileselect={},n.config.upload={},n.config.download={},n.config.swipe={},n.prefix=function(e){return n.config.classNamePrefix+e},n.showLog=function(e,t){t=t||"error";var i="";"object"==typeof e&&"message"in e&&"name"in e?i=e.message+":"+e.name:"string"==typeof e&&(i=e),n.log&&console[t](i)},n.require=function(e,t){var i,a=[],a=e.split("."),o=n;for("bui"===a[0]&&(a=a.slice(1)),i=0;i<a.length;i+=1)"undefined"==typeof o[a[i]]&&(o[a[i]]=function(e){t&&t(n.widget(a[0]))}),o=o[a[i]];return o},n.swipeDirection=function(e,t,n,i){var a=t-e,o=i-n,r=Math.abs(a),l=Math.abs(o),c=9,s=3;return c>r&&c>l?!1:r/l>s?a>0?"swiperight":"swipeleft":o>0?"swipedown":"swipeup"},n.widget=function(e){return e&&e in this?this[e]:this},n.option=function(t,i){if("id"==t)return void n.showLog("不允许修改控件的ID参数");if("string"==typeof t&&"undefined"==typeof i)return this.config[t];if(t&&"object"===bui["typeof"](t)){var a=e.extend(this.config,t);this.init(a)}else{if(!this.config.hasOwnProperty(t)||"undefined"==typeof i)return this.config;var o={};o[t]=i;var a=e.extend(this.config,o);this.init(a)}return this},n.dispatchEvent=function(e,t,n){e&&e.dispatchEvent&&t&&e.dispatchEvent(new Event(t,{bubbles:!0,cancelable:!0,detail:n}))},n}(libs,window);!function(e,t){return e.on=function(e,t,n){"function"==typeof t?(n=t,t=this):(n=n,t=t),t.handle=t.handle||{},"undefined"==typeof t.handle[e]&&(t.handle[e]=[]),t.handle[e].push(n)},e.off=function(t,n,i){if("function"==typeof n?(i=n,n=this):(i=i,n=n),"undefined"===t)n.handle={};else if("string"==typeof t&&"function"==typeof i)e.removeArray(i,n.handle[t]);else if("string"==typeof t&&void 0===i)return void console.log("callback 不能为空;")},e.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],n=[].slice.apply(arguments);n.shift();for(var i=0,a=t.length;a>i;i++)t[i].apply(this.self||this,n)}}catch(o){}},e}(bui||{},libs),function(e,t){function n(t,n){function i(){e.config.viewport.zoom?(v.style.fontSize=k+"px",t=k):t=S>-1?F[S]:60,e.trigger("viewportinit")}function a(e){return b}function o(e){return w}function r(e){return y}function l(e){return x}function c(e){return m}e.trigger("viewportbefore");var s=document.querySelector("meta[name=viewport]"),u="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",d=function(e){return document.getElementsByTagName(e)[0]};if(s)s.content=u;else{var f=document.createElement("meta");f.name="viewport",f.content=u;var h=d("head");h.appendChild(f)}var p=100,g=n||540,v=d("html"),m=window.devicePixelRatio,b=document.documentElement.clientWidth,w=document.documentElement.clientHeight,y=parseInt(b)*parseInt(m),x=parseInt(w)*parseInt(m),k=t?t:(b/g*p).toFixed(2),T=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732],F=[44.44,59.26,66.67,69.44,71.11,76.3,76.67,80.56,88.89,94.81,100,70,70,70,70,70],S=e.inArray(b,T);return i(),{width:a,height:o,fontSize:t,screenWidth:r,screenHeight:l,ratio:c,init:i}}return e.viewport=n,e}(bui||{},libs),function(e,t){return e.obj=function(e){var n;return e&&"object"==typeof e?n=t(e):e&&"string"==typeof e?n=e.indexOf(".")<0&&e.indexOf("#")<0?t("#"+e):t(e).eq(0):void 0},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.setUrlParams=function(e,t,n){var i,n=0!=n,t="object"==typeof t?t:{},a="";for(var o in t){var r=n?encodeURIComponent(t[o]):t[o];a+="&"+o+"="+r}var l=a.substr(1);return i=""==l?e:e+"?"+l},e.getUrlParams=function(e){var e=0!=e,t=window.location.search,n=new Object;if(-1!=t.indexOf("?")){var i=t.substr(1);strs=i.split("&");for(var a=0;a<strs.length;a++){var o=e?decodeURIComponent(strs[a].split("=")[1]):strs[a].split("=")[1];n[strs[a].split("=")[0]]=o}}return n},e.getUrlParam=function(e){var t=window.location.search,n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},e["typeof"]=function(e){var t=Object.prototype.toString.call(e),n=t.toLowerCase();switch(n){case"[object object]":t="object";break;case"[object function]":t="function";break;case"[object array]":t="array";break;case"[object string]":t="string";break;case"[object number]":t="number";break;case"[object null]":t="null";break;case"[object undefined]":t="undefined";break;case"[object regexp]":t="regexp";break;case"[object json]":t="json"}return t},e}(bui||{},libs),function(e,t){return e.inArray=function(t,n,i){var n=n||[];if("string"!=typeof i){var a=n.indexOf(t);return a}for(var o in n)try{var r=n[o][i];if(r===t)return o}catch(l){e.showLog(l.message)}return-1},e.compareArray=function(e,t,n){var t=t||[];if("string"!=typeof n){var i=t.indexOf(e);return i>-1}for(var a in t)try{var o=t[a][n];if(o===e)return!0}catch(r){}return!1},e.removeArray=function(e,t,n){var i=t||[];if("string"!=typeof n){var a=t.indexOf(e);return i=a>-1?i.splice(a,1):t}for(var o in i)try{var r=i[o][n];r===e&&(i=i.splice(o,1))}catch(l){}return t},e.filterArray=function(e,t,n){var i=[],t=t||[];if("string"==typeof n)for(var a in t)try{var o=t[a][n],r=new RegExp(e);r.test(o)&&i.push(t[a])}catch(l){}else i=t.filter(function(t,n,i){return t===e});return i},e.indexArray=function(e,t,n){var t=t||[],i=[];if("string"==typeof n)for(var a in t)try{var o=t[a][n];o===e&&i.push(+a)}catch(r){}else t.forEach(function(t,n,a){t===e?i.push(+n):i});return i},e.excessArray=function(e,t,n){var t=t||[],i={},a=[];if("string"==typeof n)for(var o in t)try{var r=t[o][n];i[r]!==r&&(i[r]=r,a.push(t[o]))}catch(l){}else t.forEach(function(e,t,n){i[e]!==e&&(i[e]=e,a.push(e))});return a},e}(bui||{},libs),function(e,t){return e.storage=function(t){function n(t,n,i){var a=1==r?null:c.getItem(t),o=[],l="",s=i?n[i]:n;if(null===a)o.push(n),l=JSON.stringify(o),c.setItem(t,l);else{var u=JSON.parse(a),d=i?e.compareArray(s,u,i):e.compareArray(s,u);if(d){e.removeArray(s,u,i);u.unshift(n);l=JSON.stringify(u),c.setItem(t,l)}else{u.unshift(n);u.length>r&&u.pop(),l=JSON.stringify(u),c.setItem(t,l)}}return this}function i(t,n,i){var a,o=t&&c.getItem(t)||"";try{a=o&&JSON.parse(o)||[]}catch(r){e.showLog(r.name+": "+r.message)}if("number"==typeof n&&i)a=a&&a[n]&&a[n][i]||void 0;else if("string"==typeof n){var l=e.inArray(n,a,i);a=a&&a[l]}else a="number"==typeof n?a&&a[n]||void 0:a;return a}function a(t,n,a){if("string"!=typeof t)return void e.showLog("要删除的字段名只能是字符串");var o=i(t)||[];if("number"==typeof n){o.splice(n,1);try{var r=JSON.stringify(o)||"";c.setItem(t,r)}catch(l){e.showLog(l.name+": "+l.message)}}else if("string"==typeof n){var s=e.removeArray(n,o,a);try{var r=JSON.stringify(s)||"";c.setItem(t,r)}catch(l){e.showLog(l.name+": "+l.message)}}else c.removeItem(t);return this}function o(){return c.clear(),this}var r,l;"number"==typeof t||"string"==typeof t?(r=parseInt(t)||1,l=!0):(r=t&&t.size||1,l=!t||0!=t.local);var c=l?localStorage:sessionStorage;return{get:i,set:n,remove:a,clear:o}},e}(bui||{},libs),function(e,t){return e.unit={},e.unit.remToPx=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var t=100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.debounce=function(e,t,n){var i;return function(){var a=n||this,o=arguments,r=function(){i=null,e.apply(a,o)};clearTimeout(i),i=setTimeout(r,t)}},e.unit.throttle=function(e,t,n){t||(t=250);var i,a;return function(){var o=n||this,r=+new Date,l=arguments;i&&i+t>r?(clearTimeout(a),a=setTimeout(function(){i=r,e.apply(o,l)},t)):(i=r,e.apply(o,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#"),n="string"==typeof e?t.test(e):!1;return n},e.unit.startWithId=function(e){var t=new RegExp("^#"),n="string"==typeof e?t.test(e):!1;return n},e.unit.startWithClass=function(e){var t=new RegExp("^\\."),n="string"==typeof e?t.test(e):!1;return n},e}(bui||{},libs),function(e,t){return e.platform=function(){function e(e){return/Windows NT/i.test(c)}function t(e){return/Macintosh/i.test(c)}function n(e){return/(Android|Linux)/i.test(c)}function i(e){return/(iPhone)/i.test(c)}function a(e){return/(iPad)/i.test(c)}function o(e){return/(iPhone|iPad|iOS)/i.test(c)}function r(e){return/(micromessenger)/i.test(c)}function l(e){return/(crosswalk)/i.test(c)}var c=navigator.userAgent;return{isAndroid:n,isIphone:i,isIpad:a,isIos:o,isWeiXin:r,isBingotouch:l,isMac:t,isWindow:e}}(),e}(bui||{},libs),function(e,t){return e.checkVersion=function(n){function i(e){o(e)}function a(n){f.on("click",function(){l>p?(y(),w({title:"新版本"+s,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){var e=t(this).text().trim();"立即下载"==e&&bui.run({id:downloadUrl,"native":n["native"]})}})):(x(),e.hint(m)),n.callback&&n.callback.call(this)}),h=!0}function o(n){e.ajax(n).done(function(i){var o=i,r=parseInt(o.minVersionCode),u=o.downloadUrl||"";c=o.remark||"检测到新版本"+s+",是否立即下载",l=parseInt(o.versionCode),s=o.versionName,o.isForced?(y(),r>p?w({title:n.title,content:v,width:n.width,height:n.height,mask:n.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{e.run({id:u,"native":n["native"]})}catch(t){}}}):p>r&&l>p?w({title:n.title,content:c,buttons:n.buttons,width:n.width,height:n.height,mask:n.mask,callback:function(){var i=t(this).text().trim();"立即下载"==i&&e.run({id:u,"native":n["native"]})}}):(x(),e.hint(m))):l>p?y():x(),h||a(n)}).fail(function(t){e.hint(n.tips.fail)})}var r={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},currentVersion:"",currentVersionCode:"",width:0,height:0,mask:!0,url:"",data:{},"native":!0,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null};n=n||{};var l,c,s,u=t.extend(!0,r,e.config.checkVersion,n),d='<span class="bui-badges"></span>',f=e.obj(u.id),h=!1,p=parseInt(u.currentVersionCode||e.config.versionCode),g=u.currentVersion||e.config.version,v=u.tips.minVersion,m=u.tips.nowVersion||"您目前的版本"+g+",已经是最新了 ^_^",b=u.target.indexOf("#")>-1?e.obj(u.target):f?f.find(u.target):null,w=e.confirm;i(u);var y=function(){var e=b.find(".bui-badges").length;e||b.append(d)},x=function(){b.find(".bui-badges").remove()}},e}(bui||{},libs),function(e,t){return e.animate=function(n){function i(t){return t.id?(N=e.obj(t.id),N.css({"-webkit-transition":L,transition:L}),D=t.open3D,P=t.zoom,R=t.animates||[],A=j.config=t,this):void e.showLog("animate id不能为空")}function a(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:P?-(t/100)+"rem":-t+"px";var n="translateX("+e+")";return R.push(n),M.push(n),this}function o(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:P?t/100+"rem":t+"px";var n="translateX("+e+")";return R.push(n),M.push(n),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:P?-(t/100)+"rem":-t+"px";var n="translateY("+e+")";return R.push(n),M.push(n),this}function l(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:P?t/100+"rem":t+"px";var n="translateY("+e+")";return R.push(n),M.push(n),this}function c(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",n="scale("+e+")";return R.push(n),M.push(n),this}function s(e){var e=String(e),t="scaleX("+e+")";return R.push(t),M.push(t),this}function u(e){var e=String(e),t="scaleY("+e+")";return R.push(t),M.push(t),this}function d(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotate("+e+")";return R.push(n),M.push(n),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateX("+e+")";return R.push(n),M.push(n),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="rotateY("+e+")";return R.push(n),M.push(n),this}function p(e){var e,n=String(e),i=[];n.indexOf(",")>-1?(i=n.split(","),e="",t.each(i,function(t,n){2>t&&(e+=n.indexOf("deg")>-1?","+n:","+n+"deg")}),e=e.substr(1)):e=n.indexOf("deg")>-1?n:n+"deg,0";var a="skew("+e+")";return R.push(a),M.push(a),this}function g(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewX("+e+")";return R.push(n),M.push(n),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",n="skewY("+e+")";return R.push(n),M.push(n),this}function m(e){var t=String(e);return N.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function b(e,t){var n=t||"ease-out";return L="number"==typeof e?"all "+e+"ms "+n:0==e||"none"==e?"none":1==e?"all 300ms "+n:e||"all 300ms "+n,N.css({"-webkit-transition":L,transition:L}),this}function w(){return R=[],M=[],V=[],z=0,this}function y(e){return q&&(b(),q=!1),N.css({"-webkit-transform":"",transform:""}),"none"!=L&&N.one("webkitTransitionEnd",function(){e&&e.call(j,this)}),w(),this}function x(e){var t=D?M.join("")+"translateZ(0)":M.join("");try{V[z]=[],V[z].push(R.join("")),R=[],z++}catch(n){}return N.css({"-webkit-transform":t,transform:t}),"none"!=L?N.one("webkitTransitionEnd",function(){e&&e.call(j,this)}):e&&e.call(j,this),this}function k(e){function t(e){var t=arguments,o=e[i]||[],r=e[i+1]||[];n=D?o.join("")+"translateZ(0)":o.join(""),n=M.join("")+n.replace(/\(.*?\)/g,"(0)"),N.css({"-webkit-transform":"",transform:""}),i++;try{N.one("webkitTransitionEnd",function(){return r&&r.length?void t.callee(a):(i=0,void(historyCache=[]))})}catch(l){}}var n,i=0,a=V.reverse();return t(a),this}function T(e,t){return N.css({"-webkit-transform":e,transform:e}),t&&"none"!=b&&N.one("webkitTransitionEnd",function(){t.call(j,this)}),this}function F(e){return e=parseFloat(e)||100,D=!0,N.parent().css({perspective:e+"px"}),this}function S(e,t){var n={};return"object"==typeof e?(n=e,t=""):"string"==typeof e&&(n[e]=t||""),N.css(n),this}function C(t){var n={};return e.widget.call(n,t)}function E(t,n){return e.option.call(j,t,n)}var I={id:"",zoom:!0,open3D:!1,animates:[]};if("object"==typeof n&&n.id)n=n||{};else{var O=n||"";n={},n.id=O}var N,D,P,R,j={origin:m,transition:b,property:S,open3D:F,transform:T,start:x,stop:y,clear:w,left:a,right:o,up:r,down:l,scale:c,scaleX:s,scaleY:u,rotate:d,rotateX:f,rotateY:h,skew:p,skewX:g,skewY:v,reverse:k,widget:C,option:E,config:A,init:i},A=j.config=t.extend(!0,{},I,n),M=[],V=[],L="all 300ms ease-out";i(A);var z=0,q=!1;return j},e}(bui||{},libs),function(e,t){"use strict";return e.toggle=function(n){function i(t){if(t=t||v,!t.id)return void e.hint("toggle id不能为空");d=e.obj(t.id),v=g.config=t,p=d.attr("class")||"";var n=t.effect,i=n&&(e.inArray(n,m.show)||e.inArray(n,m.hide));return b=!d[0]||"none"!=d[0].style.display,0>i?(h=m.show[0],f=m.hide[0],this):(h=m.show[i],void(f=m.hide[i]))}function a(e,t){return"function"==typeof e?(t=e,e=h||""):e=e||h||"",v.showClass=e,d[0]&&"none"==d[0].style.display&&d.css("display","block"),d.attr("class",p).removeClass(f).addClass("animated "+e),"showIn"==e||"showOut"==e?(t&&t.call(g,this),b=!0):d.one("webkitAnimationEnd",function(){!b&&d.css("display","block"),t&&t.call(g,this),b=!0}),this}function o(e,t){return"function"==typeof e?(t=e,e=f||""):e=e||f||"",d.attr("class",p).removeClass(h).addClass("animated "+e),v.hideClass=e,"showIn"==e||"showOut"==e?(d.css("display","none"),t&&t.call(g,this),b=!1):d.one("webkitAnimationEnd",function(){b&&d.css("display","none"),t&&t.call(g,this),b=!1}),this}function r(){return d.remove(),this}function l(t){var n={};return e.widget.call(n,t)}function c(t,n){return e.option.call(g,t,n)}var s={id:"",effect:"fadeIn"};if("string"==typeof n){var u=n||"";n={},n.id=u}var d,f,h,p,g={show:a,hide:o,remove:r,widget:l,option:c,config:v,init:i},v=g.config=t.extend(!0,{},s,n),m={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","flipInX","flipInY","showIn"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","flipOutX","flipOutY","showOut"]},b=!1;return i(v),g},e}(bui||{},libs),function(e,t){return e.mask=function(n){var i=[];return function(n){function a(e){var n=t.extend(!0,T,e);return T=k.config=n,w=S.css("position"),n.autoTrigger&&l(n),this}function o(e){var n=t.extend(!0,T,e),a=function(e){var t=this;if(n.appendTo)n.callback&&n.callback.call(t,e);else{var a=i[i.length-1];a&&a.callback&&a.callback.call(this,e)}e.stopPropagation()};E.on("click.bui",a),I=!0}function r(t){var n=t,i=n.background?n.background:"rgba(0,0,0,"+n.opacity+")",a="";return a+='<div class="'+e.prefix("mask")+'" style="background:'+i+";z-index:"+n.zIndex+'"></div>'}function l(e){var n=t.extend(!0,T,e),i=r(n);return E=S.children(".bui-mask"),""==n.appendTo&&s(n),E.length<1?(S.append(i).css("position","relative"),E=S.children(".bui-mask")):E.css("display","block"),y=!0,C=!0,b.call(null,"show"),I||o(n),this}function c(){return T.appendTo?(E&&E.remove(),E=null,S.css("position",w||"static"),y=!1):(u(),i.length<1&&E&&E.length&&(E&&E.remove(),E=null,C=!1)),I=!1,b.call(null,"hide"),this}function s(t){e.compareArray(O,i,"id")||i.push({id:O,opacity:t.opacity,callback:t.callback})}function u(e){i.pop()}function d(e){var n=t.extend(!0,T,e);return E=S.children(".bui-mask"),E&&E.length?(E.css("display","block"),S.css("position","relative"),y=!0,C=!0,""==n.appendTo&&s(n)):l(n),b.call(null,"show"),this}function f(){return E=S.children(".bui-mask"),T.appendTo?(E.css("display","none"),S.css("position","relative"),y=!1):(u(),i.length<1&&E&&E.length&&(E.css("display","none"),C=!1)),b.call(null,"hide"),this}function h(){return T.appendTo?y:C}function p(t){var n={};return e.widget.call(n,t)}function g(t,n){return e.option.call(k,t,n)}function v(t,n){return e.on.apply(k,arguments),this}function m(t,n){return e.off.apply(k,arguments),this}function b(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var w,y,x={appendTo:"",opacity:.6,background:"",zIndex:100,autoTrigger:!1,autoClose:!1,callback:null},k={handle:{},on:v,off:m,add:l,hide:f,show:d,isShow:h,remove:c,widget:p,option:g,config:T,init:a},T=k.config=t.extend(!0,{},x,e.config.mask,n),F=t("body"),S=T.appendTo?t(T.appendTo):F,C=!1,E=S.children(".bui-mask"),I=!1,O=e.guid();return a(T),k}}(),e}(bui||{},libs),function(e,t){return e.loading=function(){var n=[];return function(i){function a(n){var i=t.extend(!0,E,n);E=C.config=i,i.autoTrigger&&l(i);var a=i.callback;return i.callback=function(){i.autoClose&&d(),a&&a.call(this)},E.callback=i.callback,F=i.mask&&e.mask(i),this}function o(e){D=O.children(".bui-loading");var t=function(t){if(e.appendTo)e.callback&&e.callback.call(this,t);else{var i=n[n.length-1];i&&i.callback&&i.callback.call(this,t)}t.stopPropagation()};return O.on("click.bui",".bui-loading",t),P=!0,this}function r(t){t=t||{};var n=t.text,i=O.width(),a=n&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),o=-(i/2),r=-(a/2),l="block"==t.display?"":e.prefix("loading-inline"),c="";c+='<div id="'+N+'" class="'+e.prefix("loading")+" "+l+'" style="width:'+i+"px;height:"+a+"px;line-height:"+a+"px;margin-left:"+o+"px;margin-top:"+r+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(c+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),n&&(c+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>"),c+="</div>";var s=t&&t.template?t.template:c;return s}function l(e){var n=t.extend(!0,E,e);if(D=O.children(".bui-loading"),T=D.children(".bui-loading-cell"),D&&D.hasClass("bui-loading-pause"))D&&D.removeClass("bui-loading-pause"),x.call(null,"start");else{""==n.appendTo&&g(n),D.length&&(D.remove(),F&&F.remove());var i=r(n);O.append(i),F&&F.add(n),x.call(null,"show")}return n.timeout&&(R&&clearTimeout(R),R=setTimeout(function(e){d()},n.timeout)),P||o(n),this}function c(e){k=D&&D.children(".bui-loading-text");var t;return"undefined"==typeof e?t=k&&k.text():(k&&k.text(e),this)}function s(){T=D&&D.children(".bui-loading-cell"),T&&T.css("display","inline-block"),D&&D.removeClass("bui-loading-pause")}function u(){T=D&&D.children(".bui-loading-cell"),T&&T.css("display","none"),D&&D.addClass("bui-loading-pause")}function d(){return E.appendTo?(D&&D.remove(),D=null,F&&F.remove()):(v(),F&&F.remove(),n.length<1&&D&&D.length&&(D&&D.remove(),D=null)),P=!1,x.call(null,"remove"),x.call(null,"hide"),this}function f(){return D=O.children(".bui-loading"),D&&D.length&&(D.addClass("bui-loading-pause"),x.call(null,"pause")),this}function h(e){var n=t.extend(!0,E,e);return D=O.children(".bui-loading"),D&&D.length?(c(n.text),D.css("display","block"),F&&F.show(),""==n.appendTo&&g(E),x.call(null,"show")):l(n),E.timeout&&(R&&clearTimeout(R),R=setTimeout(function(e){p()},E.timeout)),this}function p(){return D=O.children(".bui-loading"),E.appendTo?(D.css("display","none"),F&&F.hide()):(v(),n.length<1&&D&&D.length&&(D.css("display","none"),F&&F.hide())),x.call(null,"hide"),this}function g(t){e.compareArray(N,n,"id")||n.push({id:N,callback:t.callback})}function v(){n.pop()}function m(t){var n={mask:F||{}};return e.widget.call(n,t)}function b(t,n){return e.option.call(C,t,n)}function w(t,n){return e.on.apply(C,arguments),this}function y(t,n){return e.off.apply(C,arguments),this}function x(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var k,T,F,S={appendTo:"",width:20,height:20,text:"正在加载...",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,display:"inline",template:null,callback:null},C={handle:{},on:w,off:y,start:l,stop:d,pause:f,text:c,showRing:s,hideRing:u,show:h,hide:p,widget:m,option:b,config:E,init:a},E=C.config=t.extend(!0,{},S,e.config.loading,i),I=t("body"),O=E.appendTo?t(E.appendTo):I,N=e.guid(),D=O.children(".bui-loading"),P=!1,R=null;return a(E),C}}(),e}(bui||{},libs),function(e,t){return e.slide=function(n){function i(n){var i=t.extend(!0,Z,n);return i.id?(O=e.obj(i.id),Z=Q.config=i,q=i.direction,i.height=parseFloat(i.height),i.width=parseFloat(i.width),X=document.documentElement.clientWidth,B=document.documentElement.clientHeight,N=0==i.menu.indexOf("#")?e.obj(i.menu):O.find(i.menu).eq(0),D=N.children(),P=O.find(i.children).eq(0),R=P.parent(),j=P.children(),a(i),r(),W=i.autoplay,W&&p(),te||o(),M=i.index,i.index>0?h(i.index,"none"):y(M),this):void e.hint("slide id不能为空")}function a(e){_=B-(t("header").height()||0)-(t("footer").height()||0)-(O[0]&&O[0].offsetTop||0),Y=0==e.height?_:e.height;var n="static"==N.parent().css("position")?N.css("position"):N.parent().css("position");$=O.find(e.menu).length?"absolute"==n||"fixed"==n?Y:Y-N.height():Y,H=e.fullscreen?B:0==e.height?$:e.height,U=e.fullscreen?X:e.width||X,A=j.length,L=U*A,z=H*A}function o(){var e=function(e){var n=t(this).hasClass("active"),i=t(this).index();n||(Z.animate?h(i):h(i,"none"),y(i),W&&p()),e.stopPropagation()};N.on("click.bui","li",e),O.on("click.bui",Z.prev,b),O.on("click.bui",Z.next,w);Z.children+" "+Z.item;O.on("click.bui",Z.children,function(e){var n=t(e.target).closest(j);I.call(n,"click",e),Z.callback&&Z.callback.call(n,e,Q)}),k(),Z.swipe||x(),te=!0}function r(){ne={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:U},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:H}},J={x:{parentInitKey:"width",parentInitValue:L,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+U+"px;height:"+H+";"},y:{parentInitKey:"height",parentInitValue:z,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+U+"px;height:"+H+";"}},P.parent()[J[q].parentInitKey](J[q].parentInitValue);var e,n=j.length;for(e=0;n>e;e++)K=Boolean(j.eq(e).attr("data-scroll"))||Z.scroll,J[q].boxItemCSS=J[q].boxItemCSS+(K?"overflow:auto;":"overflow:hidden;"),j[e].style.cssText=J[q].boxItemCSS;P[0].style.cssText=J[q].boxCss;var i=Z.zoom?Y/100+"rem":Y+"px",a=Z.zoom?$/100+"rem":$+"px";Z.zoom?U/100+"rem":U+"px";if(Z.fullscreen?(t("main").css({position:"static"}),O.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:U,height:B}),j.addClass("bui-box-center").css("height",B)):(O.css({position:"relative",overflow:"hidden",width:U,height:i}),j.height(a)),Z.autopage){var o=j.length,r=P.find(".active").index()+1,l=T(o,r);O.children(".bui-slide-head").remove(),O.append(l),D=O.find(Z.menu).eq(0).children()}}function l(e){var t=e.originalEvent&&e.originalEvent.targetTouches||e.targetTouches,n=ae?t[0]:e;return ee.x1=n.pageX,ee.y1=n.pageY,ee.direction="",se=-M*U,ue=-M*H,t.length>1||e.scale&&1!==e.scale?void d("x"==q?se:ue):(W&&(g(),W=!0),I.call(this,"touchstart",e,ee),Z.onStart&&Z.onStart.call(this,e,ee,Q),void(le=!0))}function c(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(n.length>1||t.scale&&1!==t.scale)return void d("x"==q?se:ue);if(le){var i=ae?n[0]:t;ee.x2=i.pageX,ee.y2=i.pageY,ee.direction||(ee.direction=e.swipeDirection(ee.x1,ee.x2,ee.y1,ee.y2)),"swipeleft"!==ee.direction&&"swiperight"!==ee.direction||t.preventDefault(),deltaX=ee.x2-ee.x1,deltaY=ee.y2-ee.y1,ne.x.move=se+deltaX,ne.x.absDelta=Math.abs(deltaX),ne.y.move=ue+deltaY,ne.y.absDelta=Math.abs(deltaY),I.call(this,"touchmove",t,ee),ee.direction!==ne[q].swipeDir&&ee.direction!==ne[q].swipeDir2||(Z.delay&&ne[q].absDelta>Z.distance&&d(ne[q].move,"none"),Z.delay||(Z.bufferEffect?d(ne[q].move,"none"):0==M&&"swipeleft"==ee.direction?d(ne[q].move,"none"):M==A-1&&"swiperight"==ee.direction?d(ne[q].move,"none"):M>0&&A-1>M&&d(ne[q].move,"none")),Z.onMove&&Z.onMove.call(this,t,ee,Q)),"swipeleft"!=ee.direction&&"swiperight"!=ee.direction||t.stopPropagation(),ce=!0}}function s(e){I.call(this,"touchend",e,ee),ce&&(deltaX=ee.x2-ee.x1,deltaY=ee.y2-ee.y1,ne.x.delta=se,ne.x.absDelta=Math.abs(deltaX),ne.y.delta=ue,ne.y.absDelta=Math.abs(deltaY),ne[q].absDelta>Z.distance?(u.call(this,ee,ne),Z.onEnd&&Z.onEnd.call(this,e,ee,Q)):ne[q].absDelta<Z.distance&&d(ne[q].delta),W&&p(),"swipeleft"!=ee.direction&&"swiperight"!=ee.direction||e.stopPropagation(),oe+=ee.y2-ee.y1,re+=ee.x2-ee.x1,ee.lastX=re,ee.lastY=oe,ee={x1:0,x2:0,y1:0,y2:0,direction:""},le=!1,ce=!1)}function u(e,n){M=t(this).find(".active").index();var i;e.direction==n[q].swipeDir?(M>=j.length-1?(i=M,n[q].delta=-i*n[q].width,d(n[q].delta),M=i,y(i),I.call(this,"last",i)):(i=M+1,n[q].delta=-i*n[q].width,d(n[q].delta),M=i,y(i),I.call(this,"next",i)),I.call(this,"to",i)):e.direction==n[q].swipeDir2&&(M>0?(i=M-1,n[q].delta=-i*n[q].width,d(n[q].delta),M=i,y(i),I.call(this,"prev",i)):(i=M,n[q].delta=-i*n[q].width,d(n[q].delta),M=i,y(i),I.call(this,"first",i)),I.call(this,"to",i))}function d(e,t){var n=Z.transition,t=t||"all "+n+"ms",e=e||0;switch(q){case"x":f(e+"px",0,t,R);break;case"y":f(0,e+"px",t,R)}return this}function f(e,t,n,i){var n,i=i||O,e=e||0,t=t||0,a=e,o=t,r=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):o;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"}),i.one("webkitTransitionEnd",function(){i.css({"-webkit-transition":"none",transition:"none"})})}catch(c){console.log(c.message)}}function h(e,t){var e=parseInt(e),n={x:{transform:-e*parseFloat(U)},y:{transform:-e*parseFloat(H)}};return e>=j.length||0>e?!1:(d(n[q].transform,t),M=e,y(e),W&&p(),I.call(this,"to",e),this)}function p(e){var e=e||Z.interval;g(),W=!0;var t=M;V=setInterval(function(e){t>=0&&A-1>t?t+=1:t=0,h(t)},e),I.call(null,"play")}function g(e){if(V)try{window.clearInterval(V),W=!1,I.call(null,"stop")}catch(t){}return this}function v(e){p(e)}function m(){return M}function b(){var e=M-1;return I.call(null,"prev",e),h(e),this}function w(){var e=M+1;return I.call(null,"next",e),h(e),this}function y(e){e=e||0,j.removeClass("active"),j.eq(e).addClass("active"),D.removeClass("active"),D.eq(e).addClass("active")}function x(){return O.off("touchstart",l).off("touchmove",c).off("touchend",s).off("touchcancel",function(){d("x"==q?se:ue)}),I.call(null,"lock"),this}function k(e){return O.on("touchstart",l).on("touchmove",c).on("touchend",s).on("touchcancel",function(){d("x"==q?se:ue)}),I.call(null,"unlock"),this}function T(e,t){var n,i="",t=t||1;for(i+='<div class="bui-slide-head">',i+="<ul >",n=1;n<Number(e)+1;n++)i+="<li "+(n==t?'class="active"':"")+">"+n+"</li>";return i+="</ul >",i+="</div >"}function F(t){var n={};return e.widget.call(n,t)}function S(t,n){return e.option.call(Q,t,n)}function C(t,n){return e.on.apply(Q,arguments),this}function E(t,n){return e.off.apply(Q,arguments),this}function I(t){Q.self=this==window||this==Q?null:this,e.trigger.apply(Q,arguments)}var O,N,D,P,R,j,A,M,V,L,z,q,U,H,_,Y,$,X,B,W,J,K,G={id:"",menu:".bui-slide-head ul",children:".bui-slide-main ul",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",width:0,height:0,zoom:!1,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,bufferEffect:!1,distance:80,direction:"x",autoplay:!1,scroll:!1,index:0,fullscreen:!1,autopage:!1,callback:null,onStart:null,onMove:null,onEnd:null},Q={handle:{},on:C,off:E,to:h,prev:b,next:w,stop:g,start:v,lock:x,index:m,unlock:k,widget:F,option:S,config:Z,init:i},Z=Q.config=t.extend(!0,{},G,e.config.slide,n),ee={},te=!1,ne={x:{},y:{}},ie=/hp-tablet/gi.test(navigator.appVersion),ae="ontouchstart"in window&&!ie,q="",oe=0,re=0,le=!1,ce=!1,ee={x1:0,x2:0,y1:0,y2:0,direction:""};i(Z);var se,ue;return Q},e}(bui||{},libs),function(e,t){return e.swipe=function(){var n=null,i=null;return function(a){function o(i){var a=t.extend(!0,W,i);return a.id?(A=e.obj(a.id),z=a.width?a.width:we.clientWidth,q=a.height?a.height:we.clientHeight,M=A.children(a.handle),V=G?A.children():A,U=V.children(a.swipeleft),H=V.children(a.swiperight),_=V.children(a.swipeup),Y=V.children(a.swipedown),$=parseFloat(a.movingDistance),L=$,c(),Q||(r(a),Q=!0),n&&n.close(),se||I(),this):void e.showLog("swipe id不能为空")}function r(e){V.css({width:z,position:"relative",overflow:"hidden"}),M.css({position:"relative","z-index":10});try{var t=U.attr("data-moving")||$,n=H.attr("data-moving")||$,i=_.attr("data-moving")||$,a=Y.attr("data-moving")||$,o=l(t),r=l(n),c=l(i),s=l(a);ee&&U.css({width:o}),Z&&H.css({width:r}),ne&&Y.css({height:c}),te&&_.css({height:s})}catch(u){}}function l(e){var t=W.zoom?e/100+"rem":e+"px";return t}function c(){"x"==K?(Z=!!H.length,ee=!!U.length):"y"==K?(ne=!!Y.length,te=!!_.length):"xy"==K&&(ne=!!Y.length,te=!!_.length,ee=!!U.length,Z=!!H.length)}function s(e){var n=e.originalEvent&&e.originalEvent.targetTouches||e.targetTouches;if(n.length>1||e.scale&&1!==e.scale)return void(ge=!1);var i=pe?n[0]:e;if(J.id=W.id,J.x1=i.pageX,J.y1=i.pageY,J.direction="",$hasHandle=t(e.target).closest(W.handle),j.call(this,"touchstart",e,J),G&&!fe){M=$hasHandle,V=M.parent(),U=V.children(W.swipeleft),H=V.children(W.swiperight),_=V.children(W.swipeup),Y=V.children(W.swipedown),c();var a=V.index();ye[a]||(r(W),ye[a]=!0)}if(J.movingleft=parseInt(U.attr("data-moving")||$),
J.movingright=parseInt(H.attr("data-moving")||$),J.movingup=parseInt(_.attr("data-moving")||$),J.movingdown=parseInt(Y.attr("data-moving")||$),$hasHandle.length){var o=!1;switch(K){case"x":o=!(!ee&&!Z);break;case"y":o=!(!te&&!ne);break;case"xy":o=!!(ee||Z||te||ne)}}ge=void 0==o||1==o}function u(a){var o=a.originalEvent&&a.originalEvent.targetTouches||a.targetTouches;if(o.length>1||a.scale&&1!==a.scale)return void T();var r=pe?o[0]:a;if(J.x2=r.pageX,J.y2=r.pageY,j.call(this,"touchmove",a,J),n&&a.stopPropagation(),ge){J.direction||(J.direction=e.swipeDirection(J.x1,J.x2,J.y1,J.y2)),"swipeleft"!==J.direction&&"swiperight"!==J.direction||a.preventDefault();try{if("swipeup"===J.direction||"swipedown"===J.direction){var l=A[0].scrollTop||0,c=(A[0].scrollHeight||0,$hasHandle[0].scrollTop||0),s=($hasHandle[0].scrollHeight||0,t(a.target)[0].scrollTop||0),u=t(a.target).height()||0,d=t(a.target)[0].scrollHeight||0,p=!1,g=!1;0==l&&0==c&&0==s&&(p=!0),2>=d-s-u&&(g=!0)}}catch(a){}var v="swiperight"==J.direction||"swipeleft"==J.direction?J.x2-J.x1:J.y2-J.y1,m=0;J.deltax=fe?Math.abs(v):Math.abs(v)+me,!Z||"swiperight"!=J.direction||ae||fe||i?!p||!ne||"swipedown"!=J.direction||oe||fe||i?!ee||"swipeleft"!=J.direction||ie||fe||i?!g||!te||"swipeup"!=J.direction||re||fe||i?"swipeleft"==J.direction&&ae?(L=J.movingright,m=f(J,J.movingright),ce&&O(-J.deltax,0,"none",i||H),le&&O(-m,0,"none",M),j.call(this,"movingleft",a,J),ve=!0,a.stopPropagation()):"swipeup"==J.direction&&oe?(L=J.movingdown,m=f(J,J.movingdown),ce&&O(0,-J.deltax,"none",i||Y),le&&O(0,-m,"none",M),j.call(this,"movingup",a,J),ve=!0,a.preventDefault(),a.stopPropagation()):"swiperight"==J.direction&&ie?(L=J.movingleft,m=f(J,J.movingleft),ce&&O(J.deltax,0,"none",i||U),le&&O(m,0,"none",M),j.call(this,"movingright",a,J),ve=!0,a.stopPropagation()):"swipedown"==J.direction&&re&&(L=J.movingup,m=f(J,J.movingleft),ce&&O(0,J.deltax,"none",i||_),le&&O(0,m,"none",M),j.call(this,"movingdown",a,J),ve=!0,a.preventDefault(),a.stopPropagation()):(L=J.movingup,m=h(J,J.movingup),ce&&O(0,m,"none",_),le&&O(0,-J.deltax,"none",M),j.call(this,"movingup",a,J),ve=!0,a.preventDefault(),a.stopPropagation()):(L=J.movingleft,m=h(J,J.movingleft),ce&&O(m,0,"none",U),le&&O(-J.deltax,0,"none",M),j.call(this,"movingleft",a,J),ve=!0,a.stopPropagation()):(L=J.movingdown,m=f(J,J.movingdown),ce&&O(0,m,"none",Y),le&&O(0,J.deltax,"none",M),j.call(this,"movingdown",a,J),ve=!0,a.preventDefault(),a.stopPropagation()):(L=J.movingright,m=f(J,J.movingright),ce&&O(m,0,"none",H),le&&O(J.deltax,0,"none",M),j.call(this,"movingright",a,J),ve=!0,a.stopPropagation())}}function d(e){if(j.call(this,"touchend",e,J),ve){var t="swiperight"==J.direction||"swipeleft"==J.direction?Math.abs(J.x2-J.x1):Math.abs(J.y2-J.y1);Z&&"swiperight"==J.direction&&t>W.distance&&!ae&&!fe?(g(),j.call(this,J.direction,e,J),j.call(this,"open",J.direction)):ee&&"swipeleft"==J.direction&&t>W.distance&&!ie&&!fe?(p(),j.call(this,J.direction,e,J),j.call(this,"open",J.direction)):te&&"swipeup"==J.direction&&t>W.distance&&!re&&!fe?(v(),j.call(this,J.direction,e,J),j.call(this,"open",J.direction)):ne&&"swipedown"==J.direction&&t>W.distance&&!oe&&!fe?(m(),j.call(this,J.direction,e,J),j.call(this,"open",J.direction)):fe&&t<W.distance?(ee&&ie&&p(),Z&&ae&&g(),te&&re&&v(),ne&&oe&&m(),j.call(this,J.direction,e,J)):fe&&t>W.distance?(ee&&ie&&w(),Z&&ae&&b(),te&&re&&y(),ne&&oe&&x(),j.call(this,J.direction,e,J),j.call(this,"close",J.direction)):!fe&&t<W.distance&&(ee&&!ie&&w(),Z&&!ae&&b(),te&&!re&&y(),ne&&!oe&&x(),j.call(this,J.direction,e,J)),ge=!1,ve=!1,e.stopPropagation()}}function f(e,t){var n=-t+e.deltax;return n=n>0?0:n}function h(e,t){var n=t-e.deltax;return n=n>t?t:n}function p(e){e=e||{},e.transition=e.transition||W.transition,e.target=e.target||U,e.handle=e.handle||M,n&&n.close(),fe=!0,ie=!0,G&&(n=B,i=U,we.addEventListener("click",E,!0)),ce&&O(0,0,e.transition,e.target),le&&O(-L,0,e.transition,e.handle)}function g(e){e=e||{},e.transition=e.transition||W.transition,e.target=e.target||H,e.handle=e.handle||M,n&&n.close(),fe=!0,ae=!0,G&&(n=B,i=H,we.addEventListener("click",E,!0)),ce&&O(0,0,e.transition,e.target),le&&O(L,0,e.transition,e.handle)}function v(e){e=e||{},e.transition=e.transition||W.transition,e.target=e.target||_,e.handle=e.handle||M,n&&n.close(),fe=!0,re=!0,G&&(n=B,i=_,we.addEventListener("click",E,!0)),ce&&O(0,0,e.transition,e.target),le&&O(0,-L,e.transition,e.handle)}function m(e){e=e||{},e.transition=e.transition||W.transition,e.target=e.target||Y,e.handle=e.handle||M,n&&n.close(),fe=!0,oe=!0,G&&(n=B,i=Y,we.addEventListener("click",E,!0)),ce&&O(0,0,e.transition,e.target),le&&O(0,L,e.transition,e.handle)}function b(e){e=e||{},e.transition=e.transition||W.transition,e.target=ue||H,e.handle=de||M,fe=!1,ae=!1,G&&(n=null,i=null,ue=null,de=null,we.removeEventListener("click",E,!0)),ce&&O(-L,0,e.transition,e.target),le&&O(me,0,e.transition,e.handle)}function w(e){e=e||{},e.transition=e.transition||W.transition,e.target=ue||U,e.handle=de||M,fe=!1,ie=!1,G&&(n=null,i=null,ue=null,de=null,we.removeEventListener("click",E,!0)),ce&&O("101%",0,e.transition,e.target),le&&O(-me,0,e.transition,e.handle)}function y(e){e=e||{},e.transition=e.transition||W.transition,e.target=ue||_,e.handle=de||M,fe=!1,re=!1,G&&(n=null,i=null,ue=null,de=null,we.removeEventListener("click",E,!0)),ce&&O(0,"100%",e.transition,e.target),le&&O(0,-me,e.transition,e.handle)}function x(e){e=e||{},e.transition=e.transition||W.transition,e.target=ue||Y,e.handle=de||M,fe=!1,oe=!1,G&&(n=null,i=null,ue=null,de=null,we.removeEventListener("click",E,!0)),ce&&O(0,-L,e.transition,e.target),le&&O(0,me,e.transition,e.handle)}function k(){b(),w(),x(),y(),j.call(null,"close")}function T(){ae&&b(),ie&&w(),oe&&x(),re&&y(),j.call(null,"close")}function F(){T()}function S(e){var t=e||{};t.transition=t.transition||W.transition,t.index=t.index||0;var n,i=t.target;switch(i){case"swiperight":t.target=H.eq(t.index),n=t.target.parent().index(),t.handle=G?A.children().eq(n).children(W.handle):M,de=t.handle,ue=t.target,Z&&g(t);break;case"swipeleft":t.target=U.eq(t.index),n=t.target.parent().index(),t.handle=G?A.children().eq(n).children(W.handle):M,de=t.handle,ue=t.target,ee&&p(t);break;case"swipedown":t.target=Y.eq(t.index),n=t.target.parent().index(),t.handle=G?A.children().eq(n).children(W.handle):M,de=t.handle,ue=t.target,ne&&m(t);break;case"swipeup":t.target=_.eq(t.index),n=t.target.parent().index(),t.handle=G?A.children().eq(n).children(W.handle):M,de=t.handle,ue=t.target,te&&v(t);break;default:t.target=H.eq(t.index),n=t.target.parent().index(),t.handle=G?A.children().eq(n).children(W.handle):M,de=t.handle,ue=t.target,Z&&g(t)}j.call(null,"open",i)}function C(){return n}function E(e){var i=t(e.target),a=i.closest(U).length||i.closest(H).length||i.closest(_).length||i.closest(Y).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;n&&(a||(n.close(),e.stopPropagation()))}function I(){A.on("touchstart",s).on("touchmove",u).on("touchend",d).on("touchcancel",function(){k()}),se=!0}function O(e,t,n,i){var n,a=i||A,e=e||0,t=t||0,o=W.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px",r=W.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",l=String(e).indexOf("%")>-1?e:o,c=String(t).indexOf("%")>-1?t:r;n="number"==typeof n?"all "+n+"ms":n||"all 300ms",a.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+l+","+c+")",transform:"translate("+l+","+c+")"}).one("webkitTransitionEnd",function(){a.css({"-webkit-transition":"none",transition:"none"})})}function N(){A.off("touchmove",u).off("touchend",d).off("touchcancel",function(){k()}),j.call(null,"lock")}function D(){A.on("touchmove",u).on("touchend",d).on("touchcancel",function(){k()}),j.call(null,"unlock")}function P(t,n){return e.on.apply(B,arguments),this}function R(t,n){return e.off.apply(B,arguments),this}function j(t){B.self=this==window||this==B?null:this,e.trigger.apply(B,arguments)}var A,M,V,L,z,q,U,H,_,Y,$,X={id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",hasChild:!1,handleMove:!0,targetMove:!0,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:80,transition:300},B={handle:{},active:C,on:P,off:R,close:F,open:S,lock:N,unlock:D,init:o},W=B.config=t.extend(!0,{},X,e.config.swipe,a),J={},K=W.direction,G=W.hasChild,Q=!1,Z=!1,ee=!1,te=!1,ne=!1,ie=!1,ae=!1,oe=!1,re=!1,le=W.handleMove,ce=W.targetMove,se=!1,ue=null,de=null,fe=!1,he=/hp-tablet/gi.test(navigator.appVersion),pe="ontouchstart"in window&&!he,ge=!1,ve=!1,J={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0},me=W.initDistance,be=document,we=be.documentElement;o(W);var ye=[];return B}}(),e}(bui||{},libs),function(e,t){return e.sidebar=function(n){function i(n){var i=t.extend(!0,y,n);return y=w.config=i,i.trigger&&(T=e.obj(i.trigger)),$handle=e.obj(i.handle),m=bui.swipe({id:i.id,handle:i.handle,movingDistance:i.width,swiperight:i.swiperight,swipeleft:i.swipeleft,direction:"x",hasChild:!1,width:0,height:0,handleMove:i.handleMove,zoom:i.zoom,distance:i.distance,transition:300}),v=bui.mask({appendTo:i.handle,autoTrigger:!1,opacity:.01,callback:function(){m.close()}}),k||a(),this}function a(){m.on("open",function(e){T&&T.addClass("active"),v.show(),$handle.css("overflow-y","hidden"),x=!0,g.call(null,"open",e)}),m.on("close",function(){T&&T.removeClass("active"),v.hide(),$handle.css("overflow-y","auto"),x=!1,g.call(null,"close")}),T&&T.on("click",function(){var e=t(this).attr("data-target")||void 0;x?r():o({target:e})}),k=!0}function o(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,m.open(t),this}function r(){return m.close(),this}function l(){return m.lock(),g.call(null,"lock"),this}function c(e){return m.unlock(),g.call(null,"unlock"),this}function s(){return x}function u(){return m.active()}function d(t){var n={swipe:m,mask:v};return e.widget.call(n,t)}function f(t,n){return e.option.call(w,t,n)}function h(t,n){return e.on.apply(w,arguments),this}function p(t,n){return e.off.apply(w,arguments),this}function g(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var v,m,b={id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,width:280,height:0,zoom:!0,distance:80},w={handle:{},on:h,off:p,active:u,isActive:s,open:o,close:r,lock:l,unlock:c,widget:d,option:f,config:y,init:i},y=w.config=t.extend(!0,{},b,e.config.sidebar,n),x=!1,k=!1,T=null;return i(y),w},e}(bui||{},libs),function(e,t){return e.listview=function(n){function i(n){var i=t.extend(!0,x,n);return x=y.config=i,v=e.obj(i.id),m=v.children(),b=i.height>0?i.height:m.eq(0).height(),a(i),m.each(function(e,n){n.style.height||t(n).height(b)}),k||o(i),this}function a(e){e.data.length&&m.each(function(n,i){var a=t(i),o=a.attr("status");if(!o){var l=r(e);a.append(l).attr("status","1")}})}function o(e){var t=function(t){e.callback&&e.callback.call(this,t,g)};v.on("click.bui",".bui-listview-menu .bui-btn",t),g=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.width,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:0,height:0,zoom:x.zoom,distance:e.distance,transition:300}),g.on("open",function(e){T=!0,p.call(this,"open",e)}),g.on("close",function(){T=!1,p.call(this,"close")}),k=!0}function r(e){var n="",i="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return n+='<div class="bui-listview-menu '+i+'">',t.each(e.data,function(e,t){n+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),n+="</div>"}function l(){return g.active()}function c(e){var t=e||{};return t.target=t.target||("right"==x.position?x.swipeleft.substr(1):x.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,g.open(t),this}function s(){return g.close(),this}function u(){return g.lock(),p.call(null,"lock"),this}function d(e){return g.unlock(),p.call(null,"unlock"),this}function f(t){var n={swipe:g};return e.widget.call(n,t)}function h(t,n){return e.option.call(y,t,n)}function p(t){y.self=this==window||this==y?null:this,e.trigger.apply(y,arguments)}var g,v,m,b,w={id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:160,height:0,distance:80,zoom:!1,callback:null},y={active:l,lock:u,unlock:d,open:c,close:s,widget:f,option:h,config:x,init:i},x=y.config=t.extend(!0,{},w,e.config.listview,n),k=!1,T=!1;return i(x),y},e}(bui||{},libs),function(e,t){"use strict";return e.btn=function(n){function i(t){return"object"===bui["typeof"](t)?(d.id=t.id||"",d.handle=t.handle||"",d.progress="progress"in t?t.progress:!1,d.replace="replace"in t?t.replace:!1,d.timeout=t.timeout||3e3):"string"===bui["typeof"](t)&&(d.id=t||"",d.handle="",d.progress=!1,d.replace=!1,d.timeout=3e3),l=e.obj(d.id),u=d.handle,c=d.progress,s=d.replace,this}function a(n,i){n=n,i=i;r();var a=0;l.on("click.bui",u,function(o){var r=n||t(this).attr("href"),l=t(this).attr("target"),u=!(!t(this).hasClass("disabled")&&"disabled"!=t(this).attr("disabled"));if(r&&!u){var f,h=t(this).attr("param")||"",p=h&&h.indexOf("{")>-1&&h.indexOf("}")>-1?JSON.parse(t(this).attr("param")):{},g=t.extend(!0,p,i),v=t(this).attr("progress")?"false"!=t(this).attr("progress"):c;v&&(f=e.loading({autoTrigger:!0,timeout:d.timeout}));var m=+new Date;if(350>m-a)return!1;a=m;var b={url:r,param:g,replace:s};return"_blank"==l?e.run({id:r,data:g}):e.load(b),!1}})}function o(n,i){var i=i||{};r(),l.on("click.bui",u,function(a){var o=this,r=t(o).css("background"),l="none"==r?"#fff":r;i.appendTo=o,i.background=i.background||l,i.autoClose=0!=i.autoClose,i.autoTrigger=0!=i.autoTrigger;var c=e.loading(i);return n&&n.call(o,c)})}function r(){return l.off("click.bui",u),this}var l,c,s,u,d={};return i(n),{load:a,submit:o,off:r}},e}(bui||{},libs),function(e,t){"use strict";return e.dialog=function(n){function i(n){var i=t.extend(!0,T,n);switch(w=i.effect,i.position){case"top":F="bui-dialog-top",w="fadeInDown";break;case"bottom":F="bui-dialog-bottom",w="fadeInUp";break;case"left":F="bui-dialog-left",w="fadeInLeft";break;case"right":F="bui-dialog-right",w="fadeInRight";break;case"center":F="bui-dialog-center",w=i.effect}return i.fullscreen&&(F="bui-dialog-fullscreen",w=i.effect),i.render?(i.id=e.guid(),d(i),m=e.obj(i.id)):(m=e.obj(i.id),m.addClass(F)),S=m.width()>O?O:m.width(),C=m.height()>N?N:m.height(),m.css("display","none"),b=e.toggle({id:i.id,effect:w}),y=T.mask&&e.mask({opacity:T.opacity,autoTrigger:!1,autoClose:!1,callback:function(e){T.onMask&&T.onMask()}}),T=k.config=i,this}function a(e){var n="";return n+='<div id="'+e.id+'" class="bui-dialog '+F+'" style="display:block">',e.title&&(n+='	<div class="bui-dialog-head">'+e.title+"</div>"),n+='	<div class="bui-dialog-main">',e.content&&(n+=e.content),n+="	</div>",e.buttons&&e.buttons.length&&(n+='	<div class="bui-dialog-foot bui-box">',t(e.buttons).each(function(e,t){n+='		<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"}),n+="	</div>"),e.close&&(n+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),n+="</div>"}function o(t){if(!c){m.css("display","block");var n=m.attr("status")||0;if(0==n){S=T.width||S||m.width(),C=T.height||C||m.height();var i=e.unit.pxToRemZoom(S),a=e.unit.pxToRemZoom(C),o=T.zoom?i+"rem":S+"px",r=T.zoom?a+"rem":C+"px",s=T.zoom?"-"+a/2+"rem":"-"+C/2+"px",u=T.zoom?"-"+i/2+"rem":"-"+S/2+"px";if("center"!=T.position||T.fullscreen||m.css({width:o,height:r,top:"50%","margin-top":s,left:"50%","margin-left":u,right:"auto"}),"left"!=T.position&&"right"!=T.position||T.fullscreen||m.css({width:o}),"top"!=T.position&&"bottom"!=T.position||T.fullscreen||m.css({height:r}),T.scroll){var d=m.children(".bui-dialog-head"),h=m.children(".bui-dialog-foot"),p=m.children(".bui-dialog-main"),g=d.length?d.height():0,v=h.length?h.height():0,w=m.height()-g-v;p.css({height:w})}m.attr("status","1")}return b.show(function(e){c=!0,t&&t.call(k,b)}),y.show(),E||f(),l.call(null,"open"),this}}function r(e,t){"undefined"==typeof I[e]&&(I[e]=[]),I[e].push(t)}function l(e,t){if(I[e]instanceof Array)for(var n=I[e],i=0,a=n.length;a>i;i++)n[i](t)}function c(e){return c}function s(t){if(c){var t=t||T.onClose;try{b.hide(function(e){c=!1,t&&t.call(k,b)}),y&&y.hide(),l.call(null,"close")}catch(n){e.showLog(n)}return this}}function u(){try{m.remove(),l.call(null,"remove")}catch(t){e.showLog(t)}return this}function d(e){var n=a(e);return t("body").append(n),this}function f(){return m.on("click.bui",".bui-dialog-close",function(e){T.callback&&T.callback.call(this,k),T.autoClose&&(T.render?s(u):s()),e.stopPropagation()}),m.on("click.bui",".bui-dialog-foot .bui-btn",function(e){T.callback&&T.callback.call(this,k),T.autoClose&&(T.render?s(u):s()),e.stopPropagation()}),E=!0,this}function h(e){return x.title="提示",x.content="",x.close=!1,x.render=!0,x.autoClose=!0,x.mask=!0,x.buttons=["确定"],T=t.extend(!0,x,e),i(T),l.call(null,"create"),this}function p(t){var n={toggle:b};return e.widget.call(n,t)}function g(t,n){return e.option.call(k,t,n)}function r(t,n){return e.on.apply(k,arguments),this}function v(t,n){return e.off.apply(k,arguments),this}function l(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var m,b,w,y,x={id:"",title:"",effect:"fadeInDown",content:"",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.6,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,buttons:[],onMask:null,onClose:null,callback:null},k={handle:{},on:r,off:v,open:o,close:s,isOpen:c,create:h,remove:u,widget:p,option:g,config:T,init:i},T=k.config=t.extend(!1,{},x,e.config.dialog,n),F="",S="",C="",c=!1,E=!1,I={},O=document.documentElement.clientWidth,N=document.documentElement.clientHeight;return T.id&&i(T),k},e.alert=function(n,i){var a=e.dialog(),o={};o.title="提示",o.width=400,o.height=260,o.scroll=!0,o.position="center",o.autoClose=!0,o.zoom=!0,o.buttons=[{name:"确定",className:"primary-reverse"}],o.callback=i||function(){};var r=t.extend(o,e.config.alert);if("string"==typeof n&&n.indexOf("<")>-1&&n.indexOf(">")>-1)r.content="<xmp>"+n+"</xmp>";else if("object"==typeof n){var l=JSON.stringify(n);r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}else{var l=n;r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}return a.create(r).open(),a},e.confirm=function(n,i){var a=e.dialog(),o={};o.title="提示",o.width=400,o.height=260,o.scroll=!0,o.autoClose=!0,o.zoom=!0,o.position="center",o.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],o.callback=i||function(){};var r={};return"object"==typeof n?(n.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n.content+"</div>",r=t.extend(o,e.config.confirm,n)):(r=t.extend(o,e.config.confirm),r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n+"</div>",r.callback=i||function(){}),a.create(r).open(),a},e}(bui||{},libs),function(e,t){"use strict";return e.hint=function(n,i){function a(n){var i=t.extend(!0,k,n);return w=e.guid(),F="top"===i.position?"fadeInDown":"bottom"===i.position?"fadeInUp":i.effect,k=x.config=i,r(w,i.content,T,i.appendTo),++T,b=e.toggle({id:"#"+w,effect:F}),S=!0,b.show(),i.autoClose&&(y&&clearTimeout(y),y=setTimeout(function(e){i.onClose&&i.onClose.call(x),c()},i.timeout)),C||o(i),this}function o(t){e.obj(w).on("click.bui",".bui-hint-close",function(e){c(),t.onClose&&t.onClose.call(this,x)}),C=!0}function r(n,i,a,o){var r,l="11"+a,c=e.obj(o)||t("body");switch(k.position){case"top":r="bui-hint-top";break;case"bottom":r="bui-hint-bottom";break;case"center":r="bui-hint-center"}var s=k.background?k.background:"rgba(0,0,0,"+k.opacity+")",u='<div id="'+n+'" class="bui-hint '+r+'" style="background:'+s+";z-index:"+l+'">'+i+(k.autoClose?"":'<div class="bui-hint-close"><i class="icon-close"></i></div>')+"</div>";c.append(u),o&&c.css("position","relative")}function l(){return S}function c(){return b&&(S=!1,b.hide(function(e){g.call(null,"hide"),b.remove(),b=null})),this}function s(e){return b&&(S=!1,b.hide(function(t){g.call(null,"hide"),e&&e.call(this,x)})),this}function u(e){return b&&(S=!0,b.show(function(t){g.call(null,"show"),e&&e.call(this,x)})),this}function d(t){var n={toggle:b};return e.widget.call(n,t)}function f(t,n){return e.option.call(x,t,n)}function h(t,n){return e.on.apply(x,arguments),this}function p(t,n){return e.off.apply(x,arguments),this}function g(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var v={appendTo:"",content:"",timeout:2e3,autoClose:!0,opacity:.6,background:"",effect:"fadeInUp",position:"bottom",onClose:null};if("number"==typeof n||"string"==typeof n){var m=n||"";n={},n.content=m,n.onClose=i||null}else"object"==typeof n&&n.content&&(n=n);var b,w,y,x={handle:{},on:h,off:p,remove:c,hide:s,show:u,isShow:l,widget:d,option:f,config:k,init:a},k=x.config=t.extend(!0,{},v,e.config.hint,n),T=0,F="",S=!1,C=!1;return k.content&&a(k),x},e}(bui||{},libs),function(e,t){return e.pullrefresh=function(n){function i(n){var i=t.extend(!0,M,n);return i.id?(T=e.obj(i.id),M=A.config=i,F=T[0],S=T.children(D),C=T.children(P),E=T.children(R),O=a,I=i.refreshTips.end,N=e.loading({appendTo:S,width:20,height:20,autoClose:!1,text:I,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1,callback:function(e){v()}}),i.autoLoad&&(z=!0,N.start({text:i.refreshTips.start,onlyText:!1}),O()),q||r(i),m(i.height),this):void e.hint("pullrefresh id不能为空")}function a(){L=(new Date).getTime(),M.onRefresh&&M.onRefresh.call(A),k.call(null,"refresh")}function o(){var e,t=(new Date).getTime(),n=t-L,i=1e3,a=60*i,o=60*a,r=Math.floor(n/o),l=Math.floor(n/a);Math.floor(n/i);return e=0>=r&&0>=l?"刚刚更新":0>=r&&l>0?l+"分钟前更新":"上次更新时间:"+(10>r?"0"+r:r)+":"+(10>l?"0"+l:l)}function r(e){V||d(),q=!0}function l(e){var n=e.originalEvent&&e.originalEvent.targetTouches||e.targetTouches,i=_?n[0]:e;W.x1=i.pageX,W.y1=i.pageY,W.direction="",I=M.lastUpdated?o():M.refreshTips.end,X=!(!(t(window).scrollTop()<=0&&T.scrollTop()<=0&&M.onRefresh)||z)}function c(t){var n=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(n.length>1||t.scale&&1!==t.scale)return void h();if(!X)return void h();var i=_?n[0]:t;W.x2=i.pageX,W.y2=i.pageY,W.direction||(W.direction=e.swipeDirection(W.x1,W.x2,W.y1,W.y2)),"swipeleft"!==W.direction&&"swiperight"!==W.direction||t.preventDefault(),"swipedown"==W.direction?(k.call(this,"movingdown",t,W),moveY=Math.abs(W.y2-W.y1),h(moveY/2,!1),moveY>=M.distance?J||(N.show({text:M.refreshTips.release,onlyText:!1}).pause(),J=!0):K||(N.show({text:I,onlyText:!1}).pause(),K=!0),t.preventDefault(),t.stopPropagation()):"swipeup"==W.direction&&k.call(this,"movingup",t,W),B=!0}function s(e){B&&("swipedown"==W.direction?(k.call(this,W.direction,e,W),moveY>=M.distance?(h(M.distance/2),N.show({text:M.refreshTips.start,onlyText:!1}).start(),z=!0,M.onRefresh&&O()):h(),e.stopPropagation(),J=!1,K=!1,W={}):"swipeup"==W.direction&&k.call(this,W.direction,e,W),Y+=W.y2-W.y1,$+=W.x2-W.x1,W.lastX=$,W.lastY=Y,W={x1:0,x2:0,y1:0,y2:0,direction:""},X=!1,B=!1)}function u(e){return V=!0,T.off("touchstart",l).off("touchmove",c).off("touchend",s).off("touchcancel",h),h(),e&&e.call(this,A),k.call(null,"lock"),this}function d(e){return V=!1,T.on("touchstart",l).on("touchmove",c).on("touchend",s).on("touchcancel",h),e&&e.call(this,A),k.call(null,"unlock"),this}function f(e,t,n){return U||(N.show({text:M.refreshTips.success,onlyText:!1}),h(e,t),C.one("webkitTransitionEnd",function(){N&&N.hide(),U=!1,n&&n.call(A)})),this}function h(e,t){t=0!=t,e=e||0,z=!1;var n=t?"all 300ms ease-out":"none";return p(0,e+"px",n,C),E.length&&p(0,e+"px",n,E),this}function p(e,t,n,i){var n,i=i||T,e=e||0,t=t||0,a=e,o=t,r=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):o;n="number"==typeof n?"all "+n+"ms":n||"all 300ms";try{i.css({"-webkit-transition":n,transition:n,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"}),i.one("webkitTransitionEnd",function(){i.css({"-webkit-transition":"none",transition:"none"})})}catch(c){console.log(c.message)}}function g(){U=!0,h(),e.hint(M.refreshTips.fail),k.call(this,"fail")}function v(){h(M.distance/2,!0),N.start({text:M.refreshTips.start,onlyText:!1}),M.onRefresh&&O()}function m(e){e=e?parseFloat(e):t(window).height()-(t("header").height()||0)-(t("footer").height()||0)-(F&&F.offsetTop||0),T.height(e)}function b(t){var n={loading:N};return e.widget.call(n,t)}function w(t,n){return e.option.call(A,t,n)}function y(t,n){return e.on.apply(A,arguments),this}function x(t,n){return e.off.apply(A,arguments),this}function k(t){A.self=this==window||this==A?null:this,e.trigger.apply(A,arguments)}var T,F,S,C,E,I,O,N,D="."+e.prefix("scroll-head"),P="."+e.prefix("scroll-main"),R="."+e.prefix("scroll-foot"),j={id:"",childrenTop:D,childrenMain:P,distance:90,autoLoad:!0,lastUpdated:!1,height:0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},onRefresh:null},A={handle:{},on:y,off:x,reverse:f,refresh:v,setHeight:m,fail:g,lock:u,unlock:d,widget:b,option:w,config:M,init:i},M=A.config=t.extend(!0,{},j,e.config.pullrefresh,n),V=!1,L=(new Date).getTime(),z=!1,q=!1,U=!1,H=/hp-tablet/gi.test(navigator.appVersion),_="ontouchstart"in window&&!H,Y=0,$=0,X=!1,B=!1,W={x1:0,x2:0,y1:0,y2:0,direction:""};i(M);var J=!1,K=!1;return A},e}(bui||{},libs),function(e,t){return e.scroll=function(n){function i(n){var i=t.extend(!0,Y,n);return N=t(window),i.id?(I=e.obj(i.id),Z=i.page,ee=i.pageSize,Y=_.config=i,J=!0,K=!0,G=!1,Q=!1,O=I[0],$childrenTop=I.children(z),R=I.children(q),P=I.children(U),R.css({position:"relative"}),M=e.loading({appendTo:P,width:20,height:20,autoClose:!1,text:i.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1}),j=l,A=r,V?V.init({id:i.id,onRefresh:j,distance:i.distance,lastUpdated:i.lastUpdated,height:i.height,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}):i.refresh&&i.onRefresh?(V=e.pullrefresh({id:i.id,onRefresh:j,distance:i.distance,lastUpdated:i.lastUpdated,height:i.height,refreshTips:i.refreshTips,autoLoad:i.autoRefresh}),V.lock(),B=!0):v(i.height),A&&A.call(_,Z,ee),te||a(i),this):void e.hint("scroll id不能为空")}function a(t){I.on("scroll",e.unit.debounce(o,t.delayTime)),te=!0}function o(e){var t=e.target,n=t.scrollTop||0;0==n?E.call(this,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-Y.endDistance)&&Y.onLoad&&(Y.page=_.config.page=++Z,Y.autoScroll&&A&&A.call(_,Y.page,ee),E.call(this,"scrollbottom",e)),E.call(this,"scrollend",e),Y.onScrolling&&Y.onScrolling.call(this,e,_)}function r(e,t){return W=!0,Q=!1,K&&!G&&(Y.page=_.config.page=e,M&&M.start({text:Y.scrollTips.start,onlyText:!1}),Y.onLoad&&Y.onLoad.call(_,e,t)),B&&Y.refresh&&V&&V.unlock(),this}function l(){W=!0,K=!0,G=!1,J=!1,Q=!0,Z=$,ee=Y.pageSize,ne={},M&&M.start({text:Y.scrollTips.end,onlyText:!0}),Y.page=_.config.page=Z,E.call(null,"refresh",Z),Y.onRefresh&&Y.onRefresh.call(_,Z,ee)}function c(t,n,i){var i=0!=i;if(!n||"array"!=bui["typeof"](n))return e.showLog("scroll 控件的updateCache 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确"),void(n=[]);n=n,W=!1;var a=parseInt(I.height()),o=parseInt(I.find(Y.childrenMain)[0]&&I.find(Y.childrenMain)[0].scrollHeight);if(i)if(n&&n.length>ee-1){if(K=!0,G=!1,J=!1,M&&M.start({text:Y.scrollTips.end,onlyText:!0}),o>=10&&a>o&&Y.autoNext){var r=++Z;A&&A.call(_,r,ee)}E.call(null,"loadpage",n,Z)}else{K=!1,G=!0;var l=J&&n.length<1?Y.scrollTips.nodata:Y.scrollTips.last;M&&M.start({text:l,onlyText:!0}),E.call(null,"loadpage",n,Z),E.call(null,"lastpage",n,Z)}else K=!1,G=!0,M&&M.stop();return ne[t]=n}function s(e){return V&&V.reverse(),e&&e.call(_,V),this}function u(){return Q}function d(e){return ne}function f(e){ne={}}function h(e,t){return X=!0,B=!0,M.show({text:Y.scrollTips.fail,onlyText:!0,callback:function(n){r(e,t)}}),V&&V.lock(),this}function p(t,n){var i,a,o=[];if(t&&n)for(i in ne){var r=e.filterArray(t,ne[i],n);if(r.length)for(a in r)o.push(r[a])}return o}function g(e,t){var e=e||0;D=I.find(Y.children).children(Y.handle);var n=I.height(),i=parseFloat(D.height()),a=O.scrollHeight,o=i*parseInt(e)-i;return a>n&&(O.scrollTop=o,E.call(null,"to",e),t&&t.call(_,parseInt(e))),this}function v(e){return e=e?parseFloat(e):t(window).height()-(t("header").height()||0)-(t("footer").height()||0)-(O&&O.offsetTop||0)-1,I.height(e),this}function m(t){return I.off("scroll",e.unit.debounce(o,option.delayTime)),E.call(null,"lock"),this}function b(t){return I.on("scroll",e.unit.debounce(o,option.delayTime)),E.call(null,"unlock"),this}function w(){return V&&V.refresh(),this}function y(e){var e=e||Z;return Z=e,A&&A.call(_,Z,ee),this}function x(){return A&&A.call(_,++Z,ee),this}function k(){return Z-- >0&&A&&A.call(_,Z--,ee),this}function T(t){var n={pullrefresh:V,loading:M};return e.widget.call(n,t)}function F(t,n){return e.option.call(_,t,n)}function S(t,n){return e.on.apply(_,arguments),this}function C(t,n){return e.off.apply(_,arguments),this}function E(t){_.self=this==window||this==_?null:this,e.trigger.apply(_,arguments)}var I,O,N,D,P,R,j,A,M,V,L="."+e.prefix("list"),z="."+e.prefix("scroll-head"),q="."+e.prefix("scroll-main"),U="."+e.prefix("scroll-foot"),H={id:"",childrenTop:z,childrenMain:q,childrenBottom:U,children:L,handle:"li",distance:100,endDistance:1,height:0,page:1,pageSize:10,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,delayTime:100,scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},onScrolling:null,onRefresh:null,onLoad:null},_={handle:{},on:S,off:C,reverse:s,updateCache:c,getCache:d,clearCache:f,fail:h,filter:p,to:g,lock:m,unlock:b,refresh:w,load:y,nextPage:x,prevPage:k,setHeight:v,isRefresh:u,widget:T,option:F,config:Y,init:i},Y=_.config=t.extend(!0,{},H,e.config.scroll,n),$=Y.page,X=!1,B=!1,W=!1,X=!1,J=!0,K=!0,G=!1,Q=!1,Z=Y.page,ee=Y.pageSize,te=!1,ne={};return i(Y),_},e}(bui||{},libs),function(e,t){return e.list=function(n){function i(n){var i=t.extend(!0,k,n);g=e.obj(i.id),k=x.config=i,F=k.data;var r=0==k.refresh?null:l;return w?w.init({id:i.id,children:i.children,handle:i.handle,page:i.page,pageSize:i.pageSize,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onRefresh:r,onLoad:o}):w=bui.scroll({id:i.id,children:i.children,handle:i.handle,page:i.page,pageSize:i.pageSize,height:i.height,refresh:i.refresh,autoNext:i.autoNext,autoScroll:i.autoScroll,scrollTips:i.scrollTips,refreshTips:i.refreshTips,lastUpdated:i.lastUpdated,onRefresh:r,onLoad:o}),v=g.find(i.children),m=v.children(i.handle),S||a(i),this}function a(e){return v.on("click.bui",e.handle,function(t){e.callback&&e.callback.call(this,t,x,w)}),S=!0,this}function o(e,i,a){var o=a||k.commandLoad,l=[],c=[];return F=t.extend(!0,{},C,k.data,F),k.field.page.indexOf(".")>-1?(l=k.field.page.split("."),F[l[0]]=F[l[0]]||{},F[l[0]][l[1]]=e):F[k.field.page]=e,k.field.size.indexOf(".")>-1?(c=k.field.size.split("."),F[c[0]]=F[c[0]]||{},F[c[0]][c[1]]=i):F[k.field.size]=i,k.page=x.config.page=e,b=bui.ajax({url:k.url,data:F,method:k.method,headers:k.headers,dataType:k.dataType,contentType:k.contentType,timeout:k.timeout,"native":k["native"]}).done(function(t,i,a){var l,c;l="string"==typeof t?t&&JSON.parse(t)||{}:t||{},c=""==k.field.data?l||[]:r(k.field.data,l);var s=n.template&&n.template(c,l,e)||"";n.template&&v[o](s);var u=w.isRefresh();p.call(null,"success",t,e,a);try{u?(k.onRefresh&&k.onRefresh.call(x,w,l,a),p.call(null,"refresh"),k.refresh&&w.reverse()):k.onLoad&&k.onLoad.call(x,w,l,a),w&&w.updateCache(e,c)}catch(d){}}).fail(function(t,n,a){p.call(null,"fail",t,e,a),k.onFail&&k.onFail.call(x,n,w,e,a),w&&w.fail(e,i,t)}),this}function r(e,t){function n(e){var t,n=e[a[o]],i=a[o+1];return t="string"==typeof n?JSON.parse(n):n||[],i&&i in t?(o++,arguments.callee(t)):(o=0,t)}var i,a=[];
e.indexOf(".")>-1?a=e.split("."):a.push(e);var o=0;return i=n(t)}function l(){var e=T,t=k.pageSize;return k.page=x.config.page=e,p.call(null,"refreshbefore"),o(e,t,k.commandRefresh),this}function c(n,i){var a;if("string"==typeof i)try{a=JSON.parse(i)}catch(o){return void e.showLog("data 参数必须为对象")}else a=i;return F=t.extend(!0,{},C,a)}function s(t){var n={scroll:w,ajax:b};return e.widget.call(n,t)}function u(t,n){return"data"==t&&"undefined"!=typeof n?(console.log("modify"),c(t,n)):e.option.call(x,t,n)}function d(e){return k=x.config=t.extend(!0,{},x.config,e),F=k.data,this}function f(t,n){return e.on.apply(x,arguments),this}function h(t,n){return e.off.apply(x,arguments),this}function p(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var g,v,m,b,w,y={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:"",timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,page:1,pageSize:10,autoNext:!0,autoScroll:!0,"native":!0,refresh:!0,children:".bui-list",handle:".bui-btn",height:0,commandRefresh:"html",commandLoad:"append",template:null,onRefresh:null,onLoad:null,onFail:null,callback:null},x={handle:{},on:f,off:h,refresh:l,modify:d,widget:s,option:u,config:k,init:i},k=x.config=t.extend(!0,{},y,e.config.list,n),T=k.page,F={},S=!1,C=k.data;return i(k),x},e}(bui||{},libs),function(e,t){return e.searchbar=function(n){function i(n){var i=t.extend(!0,m,n);return d=e.obj(i.id),m=v.config=i,h=d.find("input"),d.find(i.handleRemove).length>0?p:h.after('<i class="'+i.handleRemove.substr(1)+'"></i>'),p=d.find(i.handleRemove),p.hide(),b||a(i),this}function a(n){return d.on("click.bui",n.handle,function(e){document.activeElement.blur();var t=h.val();f=t,u.call(this,"search",t),n.callback&&n.callback.call(this,v,t)}),d.on("click.bui",n.handleRemove,function(){document.activeElement.blur(),h.val("");var e=h.val();f=e,t(this).hide(),u.call(this,"remove"),n.onRemove&&n.onRemove.call(this,v,e)}),d.on("input","input",e.unit.debounce(function(){var e=h.val();f=e,e?p.show():p.hide(),u.call(this,"input"),n.onInput&&n.onInput.call(this,v,e)},n.delayTime)),b=!0,this}function o(e){return e=e||f,u.call(null,"search",e),m.callback&&m.callback.call(this,v,e),this}function r(t){var n={};return e.widget.call(n,t)}function l(t,n){return e.option.call(v,t,n)}function c(t,n){return e.on.apply(v,arguments),this}function s(t,n){return e.off.apply(v,arguments),this}function u(t){v.self=this==window||this==v?null:this,e.trigger.apply(v,arguments)}var d,f,h,p,g={id:"",handle:".icon-search,.btn-search",handleRemove:".icon-remove",delayTime:400,onInput:null,onRemove:null,callback:null},v={handle:{},on:c,off:s,search:o,widget:r,option:l,config:m,init:i},m=v.config=t.extend(!0,{},g,e.config.searchbar,n),b=!1;return i(m),v},e}(bui||{},libs),function(e,t){"use strict";return e.select=function(n){function i(n){var i=t.extend(!0,N,n);if(F=[],S=[],D=i.id?e.obj(i.id).attr("id"):D,N=O.config=i,i.data.length)var l=r(i.data);if(i.popup)if(E)E.close(),x.find(".bui-dialog-main").html(l);else{if(i.id)x=e.obj(i.id);else{var s=o();t("body").append(s),x=e.obj(D),x.find(".bui-dialog-main").html(l)}E=e.dialog({id:D,effect:i.effect,mask:i.mask,position:i.position,autoClose:!1,height:i.height,width:i.width,zoom:!1,fullscreen:i.fullscreen,onMask:function(e){c()}})}else{if(!i.id)return void e.hint("select id 必须有");x=e.obj(i.id),i.data.length&&x.empty().html(l)}return C=x.find(i.handle),P||a(i),this}function a(n){n.trigger&&(y=e.obj(n.trigger),T=y.find(n.triggerChildren).length?y.find(n.triggerChildren):y,k=n.title||t.trim(T.html()),n.title&&T.html(n.title),y.on("click.bui",function(e){l()})),m("change",function(){var i=t(this),a=i.val(),o=i.attr("text"),r=i.is(":checked");switch(n.type){case"radio":F=[],S=[],F.push(o),S.push(a),s(a||""),u(o||k||"");break;case"select":F=[],S=[],F.push(o),S.push(a),s(a||""),u(o||k||"");break;case"checkbox":var l=x.attr("value"),c=x.attr("text");l&&l.indexOf(",")>-1&&(S=l.split(","),F=c.split(",")),r?(F.push(o),S.push(a)):(e.removeArray(a,S),e.removeArray(o,F)),s(S.join(",")||""),u(F.join(",")||"")}});var i=function(e){var i=this,a=t(i).find("input"),o=(a.val(),t(i).index()),r=(a.attr("text"),a.is(":checked"));e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,a.length&&"INPUT"!==e.srcElement.nodeName&&(r?r&&"checkbox"==n.type&&(a.prop("checked",!1),w.call(a,"uncheck",e)):(a.prop("checked",!0),w.call(a,"check",e)),w.call(a,"change",e)),a.length&&"INPUT"===e.srcElement.nodeName&&(r||"checkbox"!=n.type?r&&"checkbox"==n.type?w.call(a,"check",e):"radio"==n.type&&w.call(a,"check",e):w.call(a,"uncheck",e),w.call(a,"change",e)),w.call(a,"select",e),n.popup&&n.autoClose&&c(),n.onChange&&n.onChange.call(a,O,o),e.stopPropagation()},a=function(e){n.callback&&n.callback.call(this,O),e.stopPropagation()};x.on("click",n.handle,i),x.on("click.bui",n.callbackHandle,a),P=!0}function o(e){var n="";return N.popup&&(n+='<div id="'+D+'" class="bui-dialog bui-dialog-select">',N.title&&(n+='<div class="bui-dialog-head">'+N.title+"</div>"),n+='  <div class="bui-dialog-main">'),N.popup&&(n+="  </div>",N.buttons.length>0&&(n+='    <div class="bui-dialog-foot bui-box">',t.each(N.buttons,function(e,t){n+='        <div class="span1">',n+='             <div class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",n+="        </div>"}),n+="    </div>"),n+="</div>"),n}function r(n){var i=e.guid(),a="";return a+='    <div class="bui-list">',t.each(n,function(e,t){var n="";"checkbox"==N.type?n='        <input type="checkbox" class="'+(N.className||"bui-checkbox")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">':"radio"==N.type?n='        <input type="radio" class="'+(N.className||"bui-checkbox")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">':"select"==N.type&&(n='        <input type="radio" class="'+(N.className||"bui-choose")+'" name="'+i+'" value="'+t.value+'" text="'+t.name+'">'),a+='    <div class="bui-btn bui-box bui-btn-line">',"left"==N.direction&&(a+=n),"center"==N.direction?(a+='        <div class="span1" align="center">'+t.name+"</div>",a+=n):a+='        <div class="span1">'+t.name+"</div>","right"==N.direction&&(a+=n),a+="    </div>"}),a+="    </div>"}function l(e){return N.popup&&E?!E.isOpen()&&E.open(function(){e&&e.call(O)}):(x.css("display","block"),e&&e.call(O)),w.call(null,"show"),this}function c(e){return N.popup&&E?E.isOpen()&&E.close(function(){e&&e.call(O)}):(x.css("display","none"),e&&e.call(O)),w.call(null,"hide"),this}function s(n){if(!n&&""!=n){var i=x.attr("value");return i}var a=[];F=[],S=[],n.indexOf(",")>-1?a=n.split(","):a.push(n),x.find(".bui-list").children().each(function(n,i){var o=t(this).find("input"),r=o.val(),l=o.attr("text");e.compareArray(r,a)&&(F.push(l),S.push(r),o.attr("checked","checked"))}),y&&N.change&&y.attr("value",S.join(",")),x.attr("value",S.join(","))}function u(e){if(!e&&""!=e){var e=x.attr("text");return e}y&&N.change&&(y.attr("text",e),T.html(e||k)),x.attr("text",e)}function d(e){var n=[];String(e).indexOf(",")>-1?n=e.split(","):n.push(parseInt(e)),F=[],S=[],t.each(n,function(e,t){var n=C.eq(t),i=n.find("input"),a=i.val(),o=i.attr("text");(o||a)&&(F.push(o),S.push(a))}),"checkbox"==N.type?(u(F.join(",")),s(S.join(","))):(u(F[0]),s(S[0]))}function f(){if("radio"!=N.type||"select"!=N.type){var e=[],n=[];x.find("input").each(function(i,a){var o=t(this),r=o.val(),l=o.attr("text");e.push(l),n.push(r),o.prop("checked",!0)}),s(n.join(",")||""),u(e.join(",")||"")}return this}function h(){return x.find("input").prop("checked",null),s(""),u(""),w.call(null,"reset"),this}function p(e){if("radio"!=N.type||"select"!=N.type){var n=[],i=[];x.find("input").each(function(e,a){var o=t(this).is(":checked"),r=t(this).val(),l=t(this).attr("text");o?t(this).prop("checked",null):(t(this).prop("checked",!0),n.push(l),i.push(r))}),s(i.join(",")||""),u(n.join(",")||"")}}function g(t){var n={dialog:E||{}};return e.widget.call(n,t)}function v(t,n){return e.option.call(O,t,n)}function m(t,n){return e.on.apply(O,arguments),this}function b(t,n){return e.off.apply(O,arguments),this}function w(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var y,x,k,T,F,S,C,E,I={id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",data:[],popup:!0,title:"",autoClose:!1,height:0,width:0,mask:!0,change:!0,effect:"fadeInUp",type:"radio",direction:"left",position:"bottom",fullscreen:!1,buttons:[],onChange:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},O={handle:{},on:m,off:b,value:s,active:d,text:u,show:l,hide:c,selectAll:f,selectNone:h,unselect:p,widget:g,option:v,config:N,init:i},N=O.config=t.extend(!1,{},I,e.config.select,n),D=e.guid(),P=!1;return i(N),O},e}(bui||{},libs),function(e){"use strict";return e.dropdown=function(t){function n(t){var n=$.extend(!0,F,t);if(!n.id)return void e.showLog("dropdown id不能为空");v=e.obj(n.id),F=T.config=n,m=v.children(n.handle),x=n.target?v.children(n.target):m.next(),w=n.relative,b=v.attr("position")||n.position;var o=v.offset()&&v.offset().left>=document.documentElement.clientWidth?0:v.offset()&&v.offset().left,l=n.width?"auto":-o+"px",c={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:l},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:l},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};y=n.width>0?n.width:w?S:n.width,parseFloat(y)>0&&x.width(y);var s=n.showArrow?c[b].menuPosition+" "+c[b].arrowPosition:c[b].menuPosition;a(s,c[b].left);var u=x.find(".active").eq(0),d=u.index();return d>=0&&r(d),C||i(n),this}function i(e){var t=function(e){var t=$(this).hasClass("active");u(),t?c():s(),e.stopPropagation()},n=function(t){var n=$(this).attr("value")||"",i=$.trim($(this).text()),a=void 0!=v.attr("change")?v.attr("change"):e.change;e.showActive&&$(this).addClass("active").siblings().removeClass("active"),1==a&&l.call(this,i),o.call(this,n),c(),e.callback&&e.callback.call(this,T,i,n),g.call(this,"change")};m.on("click.bui",t),v.on("click.bui",e.targetHandle,n);var i=function(e){u(),e.stopPropagation()};$("body").on("click.bui",":not(.bui-dropdown)",i),C=!0}function a(e,t){x.addClass(e),w&&x.css({left:t})}function o(e){if(void 0==e){var t=m.attr("value");return t}m.attr("value",e)}function r(e){e=parseInt(e);var t=x.find(F.targetHandle).eq(e);if(t.length>0){var n=$.trim(t.text()),i=t.attr("value")||"";l(n),o(i),F.showActive&&t.addClass("active")}}function l(e){if(void 0==e){var t=$.trim(m.text());return t}var n=m.children(F.handleChildren);n?n.text(e):m.text(e),g.call(this,"change")}function c(){m.removeClass("active"),x.css("display","none"),g.call(null,"hide")}function s(){m.addClass("active"),x.css("display","block"),g.call(null,"show")}function u(){$(".bui-dropdown > .bui-btn").removeClass("active"),$(".bui-dropdown > .bui-list").css("display","none"),g.call(null,"hide")}function d(t){var n={};return e.widget.call(n,t)}function f(t,n){return e.option.call(T,t,n)}function h(t,n){return e.on.apply(T,arguments),this}function p(t,n){return e.off.apply(T,arguments),this}function g(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var v,m,b,w,y,x,k={id:"",handle:".bui-btn",handleChildren:".span1",target:"",targetHandle:".bui-btn",position:"bottom",showArrow:!1,showActive:!0,width:0,relative:!0,change:!0,callback:null},T={handle:{},on:h,off:p,active:r,value:o,text:l,hide:c,show:s,hideAll:u,widget:d,option:f,config:F,init:n},F=T.config=$.extend(!0,{},k,e.config.dropdown,t),S=document.documentElement.clientWidth,C=!1;return n(F),T},e}(bui||{}),function(e,t){"use strict";return e.accordion=function(n){function i(n){var i=t.extend(!0,T,n);return m=document.documentElement.clientWidth,b=document.documentElement.clientHeight,F=e.obj(i.id)||t("."+e.prefix("accordion")),T=k.config=i,w=i.handle.indexOf("#")>-1?e.obj(i.handle):F.children(i.handle),y=i.target.indexOf("#")>-1?e.obj(i.target):F.children(i.target),a(i),S||o(i),this}function a(e){w.removeClass("active"),y.css("display","none");b-t("header").height()-t("footer").height();parseFloat(e.targetHeight)>0&&y.height(e.targetHeight),parseFloat(e.height)>0&&F.height(e.height)}function o(e){var t=function(t){r.call(this,e),e.callback&&e.callback.call(this,k)};e.handle.indexOf("#")>-1?w.on("click.bui",t):F.on("click.bui",e.handle,t),S=!0}function r(n){var i=t(this),a=i.hasClass("active"),o=w.index(this);n.target.indexOf("#")>-1?e.obj(n.target):i.next(n.target);n.single?a?c(o):(d(),l(o)):a?c(o):l(o)}function l(e){var e=Number(e)||0,t=w.eq(e).length?w.eq(e):w,n=y.eq(e).length?y.eq(e):t.next(T.target);return t.addClass("active"),n.css("display","block"),v.call(w[e],"show"),this}function c(e){var e=Number(e)||0,t=w.eq(e).length?w.eq(e):w,n=y.eq(e).length?y.eq(e):t.next(T.target);return t.removeClass("active"),n.css("display","none"),v.call(w[e],"hide"),this}function s(){return F.length>1?F.each(function(e,n){t(n).children(T.handle).eq(0).trigger("click")}):F.children(T.handle).eq(0).trigger("click"),v.call(w[0],"show"),this}function u(){return w.each(function(e,n){t(n).addClass("active").next(T.target).css("display","block")}),v.call(w,"showall"),this}function d(){return w.each(function(e,n){t(n).removeClass("active").next(T.target).css("display","none")}),v.call(w,"hideall"),this}function f(t){var n={};return e.widget.call(n,t)}function h(t,n){return e.option.call(k,t,n)}function p(t,n){return e.on.apply(k,arguments),this}function g(t,n){return e.off.apply(k,arguments),this}function v(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var m,b,w,y,x={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,callback:null},k={handle:{},on:p,off:g,showFirst:s,showAll:u,hideAll:d,show:l,hide:c,widget:f,option:h,config:T,init:i},T=k.config=t.extend(!0,{},x,e.config.accordion,n),F=e.obj(T.id),S=!1;return i(T),k},e}(bui||{},libs),function(e,t){"use strict";return e.rating=function(n){function i(n){var i=t.extend(!0,S,n);return i.id?(b=e.obj(i.id),S=F.config=i,w=i.fullClassName,y=i.halfClassName,l(i),C||r(i),this):void e.hint("rating id不能为空")}function a(t){var n=(e.guid(),""),i=0,a=t.stars;for(i=0;a>i;i++)n+='<div class="bui-rating-cell" ></div>';return n}function o(e){var t,n="",e=String(e)||String(x),i=0,a=S.stars,o=[];o=e.indexOf(".")>-1?e.split("."):[e,0];var r=parseInt(o[0]);for(t=o[1]/10*100+"%",i=0;a>i;i++)r>i&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),i==r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),i>r&&(n+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return n}function r(e){if(!e.disabled){var n=String(e.value).indexOf(".")>-1?1:0;b.on("click.bui",e.handle,function(i){var a=t(this).index(),o=0;if(e.half){o=n%2==0?a+.5:a+1}else o=a+1;c(o),s(o),n++,e.callback&&e.callback.call(this,F),i.stopPropagation()})}C=!0}function l(e){if(e.render){var t=a(e);b.html(t),k=b.find(e.handle)}else k=b.find(e.handle);s(e.value)}function c(e){var n=[];e=String(e),S.half&&e.indexOf(".")>-1?n=e.split("."):n.push(e),k.removeClass(w).removeClass(y),k.each(function(e,i){1==n.length&&e<n[0]?t(i).addClass(w):2==n.length&&(e<n[0]&&t(i).addClass(w),e==n[0]&&t(i).addClass(y))})}function s(e){return e?(b.attr("value",e),c(e),x=e,m.call(null,"change",e)):x=b.attr("value"),x}function u(e){var t=o(e);b.attr("value",e).html(t),x=e}function d(e){var e=0!=e;return e?(b.off("click.bui",S.handle),m.call(null,"disabled")):f(),this}function f(e){return S.disabled=!1,r(),m.call(null,"undisabled"),this}function h(t){var n={};return e.widget.call(n,t)}function p(t,n){return e.option.call(F,t,n)}function g(t,n){return e.on.apply(F,arguments),this}function v(t,n){return e.off.apply(F,arguments),this}function m(t){F.self=this==window||this==F?null:this,e.trigger.apply(F,arguments)}var b,w,y,x,k,T={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,callback:null},F={handle:{},on:g,off:v,disabled:d,show:u,value:s,widget:h,option:p,config:S,init:i},S=F.config=t.extend(!0,{},T,e.config.rating,n),C=!1;return i(S),F},e}(bui||{},libs),function(e){"use strict";return e.actionsheet=function(t){function n(t){var n=$.extend(!0,w,t);p=e.obj(n.trigger),w=b.config=n,g=e.guid();var r=a(n.buttons);return $(n.appendTo).append(r),f=e.dialog({id:g,position:n.position,mask:n.mask,opacity:n.opacity,onMask:function(e){o()}}),v=e.obj(g),h=v.find(n.handle),y||i(),this}function i(){var e=function(e){w.callback&&w.callback.call(this,e,b),d.call(this,"click",e,b)},t=function(e){r.call(this)};v.on("click.bui",w.handle,e),p.on("click.bui",t),y=!0}function a(e){var t=parseFloat(w.width),n=t>0?"width:"+t+"px;left:50%;right:0;margin-left:-"+t/2+"px;":"",i="";return e&&e.length&&(i+='<div id="'+g+'" class="bui-actionsheet" style="'+n+'">',i+='    <ul class="bui-list round">',$.each(e,function(e,t){i+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"}),i+="    </ul>",w.cancelText?i+='    <div class="bui-btn round" value="cancel">'+w.cancelText+"</div>":"",i+="</div>"),i}function o(e){return f.isOpen()&&f.close(e),d.call(null,"hide"),this}function r(e){return!f.isOpen()&&f.open(e),d.call(null,"show"),this}function l(t){var n={dialog:f};return e.widget.call(n,t)}function c(t,n){return e.option.call(b,t,n)}function s(t,n){return e.on.apply(b,arguments),this}function u(t,n){return e.off.apply(b,arguments),this}function d(t){b.self=this==window||this==b?null:this,e.trigger.apply(b,arguments)}var f,h,p,g,v,m={appendTo:"body",trigger:"",handle:".bui-btn",position:"bottom",width:0,mask:!0,opacity:.6,buttons:[],cancelText:"取消",callback:null},b={handle:{},on:s,off:u,hide:o,show:r,widget:l,option:c,config:w,init:n},w=b.config=$.extend(!1,{},m,e.config.actionsheet,t),y=!1;return n(w),b},e}(bui||{}),function(e,t){return e.number=function(n){function i(n){var i=t.extend(!0,E,n);return b=i.max,w=i.min,y=i.step,i.id?(F=e.obj(i.id),E=C.config=i,i.render&&o(i),x=F.children(i.prev),k=F.children(i.next),T=F.children(i.input),N||r(i),w>b?void e.hint("min值 不能大于 max值 "):(i.disabled&&T.attr({disabled:"disabled"}),c(i.value),this)):void e.hint("number id不能为空")}function a(e){var t="";return t+='    <div class="bui-number-prev">-</div>',t+='    <input type="text" value="'+e.value+'"/>',t+='    <div class="bui-number-next">+</div>'}function o(e){var t=a(e);return F.html(t),this}function r(e){return F.on("input",e.input,function(e){var n=isNaN(parseInt(t(this).val()))?0:parseInt(t(this).val());/^[0-9]*$/i.test(n)&&c(n),e.stopPropagation()}),F.on("click.bui",e.prev,function(t){d.call(this,t),e.callback&&e.callback.call(this,t,C)}),F.on("click.bui",e.next,function(t){f.call(this,t),e.callback&&e.callback.call(this,t,C)}),N=!0,this}function l(){var e=parseInt(T.val());return e}function c(t){return value=t||0,value>b&&(E.tips&&e.hint("输入的值大于最大值"),O=!1,I=!0),value<w&&(E.tips&&e.hint("输入的值小于最小值"),O=!0,I=!1),value&&value>=w&&value<=b&&(value=value),m.call(null,"change",parseInt(value)),T.val(parseInt(value)),this}function s(e){var t=0;return e?(c(e),t=e):t=l(),t}function u(e){var e=0!=e;return e?T.attr({disabled:"disabled"}):T.removeAttr("disabled"),this}function d(){if(!O){var e=T.val(),t=parseInt(e);if(t>w){var n=t-=y;t=n>w?n:w}else t=w;c(t),m.call(this,"prev",t)}return this}function f(){if(!I){var e=T.val(),t=parseInt(e);if(b>t){var n=t+=y;t=b>n?n:b}else t=b;c(t),m.call(this,"next",t)}return this}function h(t){var n={};return e.widget.call(n,t)}function p(t,n){return e.option.call(C,t,n)}function g(t,n){return e.on.apply(C,arguments),this}function v(t,n){return e.off.apply(C,arguments),this}function m(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var b,w,y,x,k,T,F,S={id:null,min:0,max:100,step:1,value:0,disabled:!1,render:!0,tips:!0,prev:".bui-number-prev",input:"input",next:".bui-number-next",callback:null},C={handle:{},on:g,off:v,disabled:u,value:s,prev:d,next:f,widget:h,option:p,config:E,init:i},E=C.config=t.extend(!0,{},S,e.config.number,n),I=!1,O=!1,N=!1;return i(E),C},e}(bui||{},libs),function(e,t){"use strict";return e.stepbar=function(n){function i(n){var i=t.extend(!0,b,n);if(!i.id)return void e.hint("stepbar id不能为空");p=e.obj(i.id),b=m.config=i;var r=a(i.data);return t(i.id).html(r),g=p.children(),w||o(i),this}function a(e){var n="";return t.each(e,function(e,t){n+='<div class="bui-stepbar-cell">',n+='    <span class="bui-stepbar-dot"></span>',n+='    <div class="bui-stepbar-text">',t.title&&(n+="        <h3>"+t.title+"</h3>"),t.subtitle&&(n+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(n+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),n+="    </div>",n+="</div>"}),n}function o(e){var n=function(n){if(e.click){var i=t(this).index();r(i)}e.callback&&e.callback.call(this,n,m)};return p.on("click.bui",e.handle,n),w=!0,this}function r(e){if("number"==typeof e)return e=e>=g.length-1?g.length-1:0>e?0:e,g.each(function(n,i){e>n&&t(i).removeClass("active").addClass("visited"),n==e&&t(i).removeClass("visited").addClass("active"),n>e&&t(i).removeClass("visited active")}),h.call(null,"change",e),e;var e=p.children(".active").index();return e}function l(){var e=r()+1;return h.call(null,"next",e),r(e)}function c(){var e=r()-1;return h.call(null,"prev",e),r(e)}function s(t){var n={};return e.widget.call(n,t)}function u(t,n){return e.option.call(m,t,n)}function d(t,n){return e.on.apply(m,arguments),this}function f(t,n){return e.off.apply(m,arguments),this}function h(t){m.self=this==window||this==m?null:this,e.trigger.apply(m,arguments)}var p,g,v={id:null,handle:".bui-stepbar-cell",click:!0,data:[],callback:null},m={handle:{},on:d,off:f,value:r,next:l,prev:c,widget:s,option:u,config:b,init:i},b=m.config=t.extend(!0,{},v,e.config.stepbar,n),w=!1;return i(b),m},e}(bui||{},libs);var Picker=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function n(e,t){for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransform=i.MsTransform=i.msTransform=i.MozTransform=i.OTransform=i.transform=t}return e}function i(e,t){"string"!=typeof t&&(t+="ms");for(var n=0;n<e.length;n++){var i=e[n].style;i.webkitTransitionDuration=i.MsTransitionDuration=i.msTransitionDuration=i.MozTransitionDuration=i.OTransitionDuration=i.transitionDuration=t}return e}function a(e,t){var n,i,a,o;return"undefined"==typeof t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(i=a.transform||a.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),o=new WebKitCSSMatrix("none"===i?"":i)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),n=o.toString().split(",")),"x"===t&&(i=window.WebKitCSSMatrix?o.m41:16===n.length?parseFloat(n[12]):parseFloat(n[4])),"y"===t&&(i=window.WebKitCSSMatrix?o.m42:16===n.length?parseFloat(n[13]):parseFloat(n[5])),i||0}var o=this,r={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};for(var l in r)"undefined"==typeof e[l]&&(e[l]=r[l]);o.params=e,o.cols=[],o.initialized=!1;var c=function(){var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),n=e.match(/(iPad).*OS\s([\d_]+)/),i=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!n&&e.match(/(iPhone\sOS)\s([\d_]+)/),o=n||i||a,r=!!t;return o||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!r}();return o.setValue=function(e,t){var n=0;if(0===o.cols.length)return o.value=e,void o.updateValue(e);for(var i=0;i<o.cols.length;i++)o.cols[i]&&!o.cols[i].divider&&(o.cols[i].setValue(e[n],t),n++)},o.updateValue=function(e){for(var t=e||[],n=[],i=0;i<o.cols.length;i++)o.cols[i].divider||(t.push(o.cols[i].value),n.push(o.cols[i].displayValue));t.indexOf(void 0)>=0||(o.value=t,o.displayValue=n,o.params.onChange&&o.params.onChange(o,o.value,o.displayValue))},o.initPickerCol=function(e,r){function l(e){if(!k&&!x){var t=e.originalEvent||e;t.preventDefault(),x=!0,T=F=t.targetTouches[0].pageY,S=(new Date).getTime(),R=!0,E=O=a(p.wrapper[0],"y")}}function s(e){if(x){var r=e.originalEvent||e;r.preventDefault(),R=!1,F=r.targetTouches[0].pageY,k||(t(y),k=!0,E=O=a(p.wrapper[0],"y"),i(p.wrapper,"0ms")),r.preventDefault();var l=F-T;O=E+l,I=void 0,b>O&&(O=b-Math.pow(b-O,.8),I="min"),O>w&&(O=w+Math.pow(O-w,.8),I="max"),n(p.wrapper,"translate3d(0,"+O+"px,0)"),p.updateItems(void 0,O,0,o.params.updateValuesOnTouchmove),D=O-N||O,P=(new Date).getTime(),N=O}}function u(e){if(!x||!k)return void(x=k=!1);x=k=!1,i(p.wrapper,""),I&&("min"===I?n(p.wrapper,"translate3d(0,"+b+"px,0)"):n(p.wrapper,"translate3d(0,"+w+"px,0)")),C=(new Date).getTime();var t,a;C-S>300?a=O:(t=Math.abs(D/(C-P)),a=O+D*o.params.momentumRatio),a=Math.max(Math.min(a,w),b);var r=-Math.floor((a-w)/v);o.params.freeMode||(a=-r*v+w),n(p.wrapper,"translate3d(0,"+parseInt(a,10)+"px,0)"),p.updateItems(r,a,"",!0),setTimeout(function(){R=!0},100)}function d(e){if(R){t(y);var n=$(this).attr("data-picker-value");p.setValue(n)}}var f=$(e),h=f.index(),p=o.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var g,v,m,b,w;p.replaceValues=function(e,t,n){p.destroyEvents(),p.values=e,p.displayValues=t;var i=o.columnHTML(p,!0);p.wrapper.html(i),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(n||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){o.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,m=v*p.items.length,b=t/2-m+v/2,w=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),o.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),n(p.wrapper,"translate3d(0,"+w+"px,0)"),i(p.wrapper,"0ms");var y;p.setValue=function(e,t,a){"undefined"==typeof t&&(t="");var o=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();"undefined"!=typeof o&&-1!==o||(o=0);var r=-o*v+w;n(p.wrapper,"translate3d(0,"+r+"px,0)"),i(p.wrapper,t+"ms"),p.updateItems(o,r,t,a)},p.updateItems=function(e,t,r,l){"undefined"==typeof t&&(t=a(p.wrapper[0],"y")),"undefined"==typeof e&&(e=-Math.round((t-w)/v)),0>e&&(e=0),e>=p.items.length&&(e=p.items.length-1);var s=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),i(p.items,r);var u=p.items.eq(e).addClass("picker-selected");if(n(u,""),o.params.rotateEffect){(t-(Math.floor((t-w)/v)*v+w))/v;p.items.each(function(){var e=$(this),i=e.index()*v,a=w-t,o=i-a,r=o/v,l=Math.ceil(p.height/v/2)+1,s=-18*r;s>180&&(s=180),-180>s&&(s=-180),Math.abs(r)>l?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),n(e,"translate3d(0, "+(-t+w)+"px, "+(c?-110:0)+"px) rotateX("+s+"deg)")})}(l||"undefined"==typeof l)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,s!=e&&(p.onChange&&p.onChange(o,p.value,p.displayValue),o.updateValue()))},r&&p.updateItems(0,w,0);var x,k,T,F,S,C,E,I,O,N,D,P,R=!0;p.initEvents=function(e){var t=e?"off":"on";p.container[t]("touchstart",l),p.container[t]("touchmove",s),p.container[t]("touchend",u),p.items[t]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},o.columnHTML=function(e,t){var n="",i="";if(e.divider)i+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)n+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";i+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+n+"</div></div>"}return t?n:i},o.layout=function(){var e,t="",n="";o.cols=[];var i="";for(e=0;e<o.params.cols.length;e++){var a=o.params.cols[e];i+=o.columnHTML(o.params.cols[e]),o.cols.push(a)}n="picker-modal picker-columns "+(o.params.cssClass||"")+(o.params.rotateEffect?" picker-3d":""),t='<div class="'+n+'"><div class="picker-modal-inner picker-items">'+i+'<div class="picker-center-highlight"></div></div></div>',o.pickerHTML=t},o.init=function(){o.initialized||(o.layout(),o.container=$(o.pickerHTML),o.container.addClass("picker-modal-inline"),$(o.params.container).html(o.container),o.container.find(".picker-items-col").each(function(){var e=!0;(!o.initialized&&o.params.value||o.initialized&&o.value)&&(e=!1),o.initPickerCol(this,e)}),o.value?o.setValue(o.value,0):o.params.value&&o.setValue(o.params.value,0)),o.initialized=!0},o.init(),o};!function(e,t){return e.picker=function(e){return new Picker(e)},e}(bui||{},libs),function(e,t){return e.pickerdate=function(){function n(e){return e&&e.constructor==Date?e:e&&"string"==typeof e?(e=e.replace(/-/gim,"/").replace(/^(\d+\/\d+?)($|\s)/,function(e,t){return t+"/1"}),new Date(e)):"number"==typeof e?new Date(e):new Date}function i(e,t){var e,t,n=new Date;return n.getTime()<e.getTime()?e:n.getTime()>t.getTime()?t:n}function a(a){function o(e){var t=new Date("1970/1/1");return E.forEach(function(n,i){t["set"+n](e[T[n]].value-("Month"==n?1:0))}),t}function r(e){var t=n(e);return E.map(function(e,n){return t["get"+e]()+("Month"==e?1:0)})}function l(e){k&&!k.isOpen()&&k.open(function(){})}function c(t){y.self=this==window||this==y?null:this,e.trigger.apply(y,arguments)}var s,u,d,f,h,p,g,v,m,b,w=a||{},y=this,x=function(){},k=null,T={},F=["FullYear","Month","Date"],S=["Hours","Minutes","Seconds"],C={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},E=[],I=!1;this.config={},this.option=function(){},this.cols=function(e){return e=e||{},v=[],m=[],g=[],T={},E=[],F.forEach(function(t,n){"none"!==e[C[t]]&&(E.push(t),v.push(t))}),S.forEach(function(t,n){"none"!==e[C[t]]&&(E.push(t),m.push(t))}),v.forEach(function(t,n){T[t]=g.length,g.push(D[t](e[C[t]]))}),m.forEach(function(t,n){0==n&&0!=v.length?g.push(D.Space()):g.push(D.Divider()),T[t]=g.length,g.push(D[t](e[C[t]]))}),y.picker&&(y.picker.params.cols=g,y.picker.initialized=!1,y.picker.init()),I=!1,this},this.id=function(e){e&&!f&&(f=e)},this.reset=function(){return y.picker&&(y.picker.initialized=!1,y.picker.init()),this},this.min=function(e){return u=n(e||w.min||"1960/01/01 00:00:00"),this},this.max=function(e){return d=n(e||w.max||"2030/01/01 00:00:00"),this},this.value=function(e){if(e){var t=n(e),i=r(t);return y.picker.setValue(i,0),this}return p(y.picker,y.value,y.displayValue)},this.handle=function(t){if(t&&s!==t){var n=e.obj(s);n&&n.off("click",l),n=e.obj(t),n&&n.on("click",l),l.hasOpen=!1,s=t}return this};var O={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){var n=t>1?"0":"";return(n+(e.getMonth()+1)).slice(-2)},d:function(e,t){var n=t>1?"0":"";return(n+e.getDate()).slice(-2)},h:function(e,t){var n=t>1?"0":"";return(n+e.getHours()).slice(-2)},m:function(e,t){var n=t>1?"0":"";return(n+e.getMinutes()).slice(-2)},s:function(e,t){var n=t>1?"0":"";return(n+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return p=function(t,n,i){
var a=o(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,function(e){return O[e[0]](a,e.length)})},y.picker&&y.picker.updateValue(),I=!1,this},this.onChange=function(e){return h=e||x,c.call(this,"change",b),this},this.popup=function(n){var i,a=e.guid(),o={id:a,height:240,popup:!0,mask:!0,position:"bottom",buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onMask:function(){k&&k.close()},callback:null},r=t.extend(!0,o,n);if(r.callback=function(){var e=n.callback&&n.callback.call(this);1!=e&&"undefined"!=typeof e||("取消"==t(this).text().trim()||"cancel"==t(this).text().trim()||"关闭"==t(this).text().trim()?y.value(i):i=y.value())},r.popup&&!k){var l='<div id="'+a+'" class="bui-dialog" >';l+='<div class="bui-dialog-main"><div id="'+a+'-picker"></div></div>',r.buttons&&r.buttons.length&&(l+='<div class="bui-dialog-foot bui-box">',t.each(r.buttons,function(e,t){var n="object"==typeof t&&"className"in t?" "+t.className:"",i="object"==typeof t&&"name"in t?t.name:t;l+='<div class="span1"><div class="bui-btn'+n+'">'+i+"</div></div>"}),l+="</div>"),l+="</div>";t(l).appendTo(document.body);f=e.obj(a+"-picker"),k=e.dialog(r)}return k&&k.on("open",function(){i=p(y.picker,y.value,y.displayValue),I||(y.reset(),I=!0),c.call(this,"show")}),k&&k.on("close",function(){c.call(this,"hide")}),this};var N=function(e,t,n){var i=o(e.cols),a=u["get"+t](),r=d["get"+t](),l=i.getTime(),c=u.getTime(),s=d.getTime();return c>l&&i["get"+t]()<a?("Month"==t&&(a+=1),void e.cols[T[t]].setValue(a)):l>s&&i["get"+t]()>r?("Month"==t&&(r+=1),void e.cols[T[t]].setValue(r)):void(n&&(c>l||l>s)&&e.cols[T[n]].onChange(e))},D={};D.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=u.getFullYear(),n=d.getFullYear(),i=t;n>=i;i++)e.push(i);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){N(e,"FullYear",T.Month?"Month":"")}}},D.Month=function(e){return e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,n){for(var i=new Date(e.cols[T.FullYear].value,parseInt(e.cols[T.Month].value),0).getDate(),a=[],o=1;i>=o;o++)a.push(o);var r=e.cols[T.Date];r&&r.replaceValues&&r.replaceValues(a,null,r.value<i?r.value:i),N(e,"Month",T.Date?"Date":"")}}},D.Date=function(e){return e=e||{values:function(){var e=31,t=[];do t.unshift(e);while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){N(e,"Date",T.Hours?"Hours":"")}}},D.Space=function(){return{divider:!0,content:"  "}},D.Hours=function(e){return e=e||function(){for(var e=[],t=[],n=0;24>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){N(e,"Hours",T.Minutes?"Minutes":"")}}},D.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},D.Minutes=function(e){return e=e||function(){for(var e=[],t=[],n=0;60>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){N(e,"Minutes",T.Seconds?"Seconds":"")}}},D.Seconds=function(e){return e=e||function(){for(var e=[],t=[],n=0;60>n;n++)e.push(n),t.push(("0"+n).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,n){N(e,"Seconds")}}},y.min(w.min),y.max(w.max),y.cols(w.cols),y.onChange(w.onChange),y.formatValue(w.formatValue||"yyyy-MM-dd hh:mm:ss"),y.popup(w),y.id(w.id),y.handle(w.handle),y.picker=e.picker({container:f,rotateEffect:!0,value:r(w.value?n(w.value):i(u,d)),onChange:function(e,t,n){var i=p(e,t,n);b!=i&&(b=i,h(i),c.call(this,"change",i))},cols:g}),this.widget=function(t){var n={dialog:k||{}};return e.widget.call(n,t)},this.on=function(t,n){return e.on.apply(y,arguments),this},this.off=function(t,n){return e.off.apply(y,arguments),this}}return function(e){return new a(e)}}(),e}(bui||{},libs),function(e,t){return e.ajax=function(n){var i=t.Deferred(),a={data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!1,async:!0,contentType:"","native":!0},o=t.extend(!0,{},a,e.config.ajax,n);return""===o.contentType&&"GET"==o.method?o.contentType="text/html;charset=UTF-8":""===o.contentType&&"POST"==o.method?o.contentType="application/x-www-form-urlencoded":o.contentType=o.contentType,e.debug||!o["native"]?ajaxHandle=t.ajax({async:o.async,url:o.url,data:o.data,type:o.method,dataType:o.dataType,headers:o.headers,contentType:o.contentType,timeout:o.timeout,processData:o.processData,mimeType:o.mimeType,cache:o.cache,success:function(e,t,n){var a;if("string"==typeof e)try{a=JSON.parse(e)}catch(r){a=e}else a=e||{};o.success&&o.success(a,t,n),i.resolve(a,t,n)},error:function(e,t,n){var a;if("string"==typeof e)try{a=JSON.parse(e)}catch(r){a=e}else a=e||{};o.fail&&o.fail(a,t,n),i.reject(a,t,n)}}):i=e["native"].ajax(o)||i,i.abort=function(){ajaxHandle&&ajaxHandle.abort()},i},e}(bui||{},libs),function(e,t){return e.load=function(n){var i,a={url:"",param:{},replace:!1,"native":!0},o=t.extend(!0,{},a,e.config.load,n);if(!o.url)return void e.showLog("url 不能为空!");try{o.param="string"==typeof o.param&&JSON.parse(o.param)||o.param||{}}catch(r){return void e.showLog("param 参数值必须是一个{}对象")}return document.activeElement.blur(),i=e.setUrlParams(o.url,o.param),o.replace?void window.location.replace(i):void(e.debug||!o["native"]?window.location.href=i:e["native"].load(o))},e}(bui||{},libs),function(e,t){return e.getPageParams=function(n){var i=t.Deferred(),a={callback:null,"native":!0};n=n||{};var o=t.extend(!0,{},a,e.config.getPageParams);if("function"==typeof n?o.callback=n:n&&"object"===e["typeof"](n)&&(o=t.extend(!0,{},a,e.config.getPageParams,n)),e.debug||!o["native"]){var r=e.getUrlParams();o.callback&&o.callback(r),i.resolve(r)}else i=e["native"].getPageParams(o)||i;return i},e}(bui||{},libs),function(e,t){return e.back=function(n){var i={index:-1,"native":!0,callback:null};n=n||{};var a;"function"==typeof n?(i.callback=n,a=t.extend(!0,{},i,e.config.back)):a=n&&"object"===e["typeof"](n)?t.extend(!0,{},i,e.config.back,n):t.extend(!0,{},i,e.config.back),e.debug||!a["native"]?window.history.go(a.index):e["native"].back(a)},e}(bui||{},libs),function(e,t){return e.refresh=function(n){var i={"native":!0},a=t.extend(!0,{},i,e.config.refresh,n);e.debug||!a["native"]?window.location.reload(!0):e["native"].refresh(a)},e}(bui||{},libs),function(e,t){return e.run=function(n){var i={id:"",name:"",data:null,onFail:null,"native":!0},a=t.extend(!0,{},i,e.config.run,n);if(e.debug||!a["native"]){if(String(a.id).indexOf("http://")>-1){var o=e.setUrlParams(a.id,a.data),r=window.open("","_newtab");r.location=o}}else e["native"].run(a)},e}(bui||{},libs),function(e,t){return e.fileselect=function(n){function i(t){w=[],y?r():h=e["native"].fileselect(t,{module:v})}function a(n){m=null;var i=this,a=t.extend(!0,g,n);b=a,y?(f.off("change").on("change",function(){var t=this.files;if(t.length<1)return void(a.onFail&&a.onFail.call(i,t,w));t.length>1&&e.showLog("一次只能选一张图片"),m=t[0];try{if(!bui.compareArray(t[0].name,w,"name")){var n={name:t[0].name,data:t[0],type:t[0].type,size:t[0].size};w.push(n)}}catch(o){e.showLog(o)}a.onSuccess&&a.onSuccess.call(i,t,w)}),e.platform.isIos()?f[0].dispatchEvent(new Event("click")):f.trigger("click")):h.add(a)}function o(e){function t(e){var t=new FileReader;t.onloadend=function(t){var n=new Image,a=!1,o=b.width||800,r=b.quality||.8,l=document.createElement("canvas"),c=l.getContext("2d");n.src=this.result,n.onload=function(){return a?void 0:(l.width=o,l.height=o*(n.height/n.width),c.drawImage(n,0,0,l.width,l.height),n.src=l.toDataURL("image/jpeg",r),i&&i.call(v,n.src,e),void(a=!0))}},t.readAsDataURL(e)}var e=e||{},n=e.data||m,i=e.onSuccess||function(){};e.onFail||function(){};if(y)try{t(n)}catch(a){}else h.toBase64(e);return this}function r(){if(void 0==f){d=bui.guid();var e='<input type="file" name="uploadFiles" id="'+d+'" hidden/>';t("body").append(e),f=t("#"+d)||t('input[name="uploadFiles"]')}}function l(e,t){var t=t||"name";if(!y)return w=h.remove(e,t);if("string"==typeof e){w=bui.removeArray(e,w,t);var n=w.length?w[w.length-1].data:null;return m=n,w}return this}function c(){return w=[],m=null,y||h.clear(),w}function s(){return w=y?w:h.data()}function u(){return m=y?m:h.value()}var d,f,h,p={"native":!0,quality:.8,width:800,height:800,mediaType:"picture"},g=t.extend(!0,{},p,e.config.fileselect,n),v={add:a,remove:l,clear:c,value:u,data:s,toBase64:o,init:i},m=null,b=null,w=[],y=e.debug||!g["native"];return i(g),v},e}(bui||{},libs),function(e,t){return e.file=function(n){function i(t){return b=e.fileselect(t),g=a(t),v=o({root:!0,create:!0}),this}function a(n){function i(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}var n={msg:t};a.reject(n)}var a=t.Deferred();return webapp?(h="bui.app",p=window,m=1024*parseInt(T.size)*1024,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(m,function(e){window.webkitRequestFileSystem(window.PERSISTENT,e,function(e){a.resolve(e)},i)})):w=e["native"].file(n,{fileselect:b,module:k}),a}function o(e){var n={folderName:h,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),webapp){var o=r(i.folderName);o=i.root?o:h+"/"+o,g.done(function(e){e.root.getDirectory(o,i.param,function(t){i.onSuccess&&i.onSuccess.call(k,t,e)},function(e){var t={msg:a+o+" 文件夹失败"};i.onFail&&i.onFail.call(k,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(k,t)})}else w.getFolder(i);return this}function r(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),r(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function l(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function c(e){var n={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());if(webapp){var r=l(i.fileName);o({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==h?e.name+"/"+r:h+"/"+e.name+"/"+r;t.root.getFile(n,i.param,function(e){y=e,i.onSuccess&&i.onSuccess.call(k,e,t)},function(e){var t={msg:a+r+" 文件失败"};i.onFail&&i.onFail.call(k,t)})},onFail:function(e){i.onFail&&i.onFail(e)}})}else w.getFile(i);return this}function s(e){var n=t.extend(!0,{},e);return webapp?o({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively(function(){n.onSuccess&&n.onSuccess.call(k,e,t)},function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(k,i,e)})},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(k,t)}}):w.removeFolder(n),this}function u(e){var n=t.extend(!0,{},e);return webapp?c({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove(function(){n.onSuccess&&n.onSuccess.call(k,e,t)},function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(k,i,e)})},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(k,t)}}):w.removeFile(n),this}function d(t){var n=t||{};if(n.url){l(n.url);return webapp?e.showLog("web暂不支持open方法"):w.open(n),this}}function f(e){return b.toBase64(e),this}var h,p,g,v,m,b,w,y,x={size:10,"native":!0},k={getFolder:o,removeFolder:s,getFile:c,getFileName:l,removeFile:u,toBase64:f,open:d,init:i},T=k.config=t.extend(!0,{},x,e.config.file,n);return floderData="",webapp=e.debug||"undefined"==typeof cordova||0==T["native"],i(T),k},e}(bui||{},libs),function(e,t){return e.upload=function(n){function i(t){v=e.loading({callback:function(){u()}}),m=e.fileselect({"native":t["native"],mediaType:t.mediaType}),I||(w=e["native"].upload(t,{loading:v,fileselect:m,module:S})),t.data&&s(t)}function a(e){var t=m.add.bind(S);return t(e),this}function o(e,t){return m.remove(e,t),this}function r(){return m.clear(),this}function l(e){return m.toBase64(e),this}function c(){return m.data()}function s(e){var n=t.extend(!0,{},F,e);return x=n.url,n.data=y=n.data||m.value(),C=n.showProgress,y?(C&&v.show(),I?d(n):w.start(n),this):void 0}function u(e){return I?(v&&v.stop(),b&&b.abort(),e&&e.call(S,v,b)):w.stop(e),this}function d(e){e.cache=!1,e.contentType=!1,e.processData=!1,e.method="POST";var n=e.onSuccess,i=e.onFail,a=new FormData;return a.append(e.fileKey,y),b=t.ajax({url:x,type:e.method,data:a,cache:e.cache,headers:e.headers,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();return f&&e.upload?(e.upload.addEventListener("progress",f,!1),e):void 0},success:function(e){p(),n&&n.call(S,e)},fail:function(e,t){p(),i&&i.call(S,e,t)}}),this}function f(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",100>t?h(k):p(),E&&E.call(S,k)}})}function h(e){return v&&v.show({text:e}),this}function p(){return v&&v.stop(),this}function g(t){var n={loading:v,fileselect:m,ajax:b};return e.widget.call(n,t)}var v,m,b,w,y,x,k,T={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,"native":!0,fileKey:"file",mimeType:"image/jpeg",mediaType:"allmedia",onProgress:null,onSuccess:null,onFail:null},F=t.extend(!0,{},T,e.config.upload,n),S={init:i,add:a,remove:o,clear:r,data:c,start:s,stop:u,toBase64:l,widget:g},C=F.showProgress,E=F.onProgress,I=e.debug||!F["native"];return i(F),S},e}(bui||{},libs),function(e,t){return e.download=function(n){function i(t){return y=e.loading({callback:function(){r()}}),h=e.file({"native":t["native"]}),F?h.getFolder({folderName:t.folderName,create:!1,onSuccess:function(e,t){m=e.fullPath},onFail:function(e){h.getFolder({folderName:t.folderName,create:!0,onSuccess:function(e,t){m=e.fullPath},onFail:function(e){C&&C(e)}})}}):p=e["native"].download(t,{file:h,loading:y,module:k}),t.url?(a(t),this):void 0}function a(e){var n=t.extend(!0,{},T,e);g=n.url,v=encodeURI(g),S=n.onProgress,n.showProgress&&y.show({text:"0%"}),b=m+"/"+(e.fileName||h.getFileName(g)),F?(n.cache=!1,n.contentType=!1,n.processData=!1,f=t.ajax({url:v,type:n.method,data:n.data,cache:n.cache,headers:n.headers,contentType:n.contentType,processData:n.processData,timeout:n.timeout,xhr:function(){var e=t.ajaxSettings.xhr();return l&&e?(e.addEventListener("progress",l,!1),e):void 0},success:function(t){var i=e.fileName||h.getFileName(n.url);h.getFile({fileName:i,folderName:n.folderName,create:!0,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(k,e.fullPath,t)}})},fail:function(e){s(),n.onFail&&n.onFail.call(k,e)}})):p.start(n)}function o(e){var n=t.extend(!0,{autoDown:!0},T,e),i=e.fileName||h.getFileName(n.url);h.getFile({fileName:i,folderName:n.folderName,onSuccess:function(e,t){n.onSuccess&&n.onSuccess.call(k,e.fullPath,e,t)},onFail:function(e){n.autoDown=a(n)}})}function r(e){F?(s(),f&&f.abort()):p.stop(),e&&e.call(k,y,f)}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);w=t.toString()+"%",100>t?c(w):s(),S&&S.call(k,w)}})}function c(e){y&&y.show({text:e})}function s(){y&&y.stop()}function u(e){return h.toBase64(e),this}function d(t){var n={loading:y,file:h,ajax:f};return e.widget.call(n,t)}var f,h,p,g,v,m,b,w,y,x={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},k={getFile:o,start:a,stop:r,toBase64:u,init:i,widget:d},T=k.config=t.extend(!0,{},x,e.config.download,n),F=e.debug||0==T["native"],S=(T.showProgress,T.onProgress),C=T.onFail;return i(T),k},e}(bui||{},libs),function(e,t){return e.ready=function(n){var i=t.Deferred();switch(e.currentPlatform){case"web":t(document).ready(function(){n&&n(),e.trigger("pageready"),i.resolve()});break;case"app":i=e["native"].ready(n)||i;break;default:e.debug?t(document).ready(function(){n&&n(),e.trigger("pageready"),i.resolve()}):i=e["native"].ready(n)||i}return i},e}(bui||{},libs),function(e,t){return e["native"].ajax=function(e){var n=t.Deferred(),i=t.extend(!0,{},e),a=function(e,t,a){var o,r;if("string"==typeof e)try{o=JSON.parse(e)}catch(l){o=e}else o=e||{};if("string"==typeof o.returnValue)try{r=JSON.parse(o.returnValue)}catch(l){r=o.returnValue}else r=o.returnValue||{};i.success&&i.success(r,t,a),n.resolve(r,t,a)},o=function(e,t,a){var o,r;if("string"==typeof e)try{o=JSON.parse(e)}catch(l){o=e}else o=e||{};if("string"==typeof o.returnValue)try{r=JSON.parse(o.returnValue)}catch(l){r=o.returnValue}else r=o.returnValue||{};i.fail&&i.fail(r,t,a),n.reject(r,t,a)};return Cordova.exec(a,o,"HttpRequest","ajax",[i.url,i.data,i.method,i.async,i.contentType,i.headers,i.timeout,i.dataType,i.processData,i.cache,i.mimeType]),n},e}(bui||{},libs),function(e,t){return e["native"].load=function(e){var t={};if(e.url.indexOf("http://")>-1||e.url.indexOf("https://")>-1||e.url.indexOf("file://")>-1||0==e.url.indexOf("/"))e.url=e.url;else{var n=window.location.href,i=n.lastIndexOf("/");e.url=n.substring(0,i)+"/"+e.url}t.url=e.url,t.params=e.param,Cordova.exec(null,null,"Page","loadUrl",[t])},e}(bui||{},libs),function(e,t){return e["native"].getPageParams=function(e){var n=t.Deferred(),i=function(t){try{var i="string"==typeof t?JSON.parse(t):t;e.callback&&e.callback(i)}catch(a){}n.resolve(i)};return Cordova.exec(i,null,"Page","getPageParams",[]),n},e}(bui||{},libs),function(e,t){return e["native"].back=function(e){app.back(e.callback)},e}(bui||{},libs),function(e,t){return e["native"].refresh=function(e){app.refresh()},e}(bui||{},libs),function(e,t){return e["native"].run=function(e){app.run(e.id,e.data)},e}(bui||{},libs),function(e,t){return e["native"].fileselect=function(e,n){function i(){h=[]}function a(e){function n(){var e={},t=navigator.camera.DestinationType;switch(e.quality=String(a.quality).indexOf(".")>-1?100*a.quality:a.quality,e.targetWidth=void 0==a.width?void 0:a.targetWidth||800,e.targetHeight=void 0==a.height?void 0:a.targetHeight||800,e.correctOrientation=0!=a.correctOrientation,e.allowEdit=0!=a.allowEdit,e.params=a.params||{},a.from){case"photo":e.sourceType=Camera.PictureSourceType.PHOTOLIBRARY;break;case"camera":e.sourceType=Camera.PictureSourceType.CAMERA;break;case"savephoto":e.sourceType=Camera.PictureSourceType.SAVEDPHOTOALBUM;break;default:e.sourceType=Camera.PictureSourceType.PHOTOLIBRARY}switch(a.destinationType){case"data":e.destinationType=t.DATA_URL;break;default:e.destinationType=t.FILE_URI}navigator.camera.getPicture(function(n){if(e.destinationType==t.FILE_URI)window.resolveLocalFileSystemURI(n,function(e){var t=e.fullPath;f=t;var n=t.lastIndexOf("?"),o=0>n?void 0:n,r=t.slice(t.lastIndexOf(".")+1,o),l=t.slice(t.lastIndexOf("/")+1,o),c="image/"+r;if(!bui.compareArray(l,h,"name")){var s={name:l,data:t,type:c};h.push(s)}a.onSuccess&&a.onSuccess.call(i,t,h)},function(e){a.onFail&&a.onFail.call(i,e)});else{f=n;var o={name:"base64.jpg",data:n,type:"jpg"};h.push(o),a.onSuccess&&a.onSuccess.call(i,n,h)}},function(e){a.onFail&&a.onFail.call(i,e)},e)}f=null;var i=this,a=t.extend(!0,{width:800,height:800},u,e);switch(a.mediaType){case"picture":n();break;case"video":n();break;default:n()}}function o(e){function t(e){try{e.root.getFile(v,null,n,o)}catch(t){console.log(t)}}function n(e){e.file(i,o)}function i(e){a(e)}function a(e){var t=new FileReader;t.onloadend=function(t){l&&l.call(d,t.target.result,e)},t.readAsDataURL(e)}function o(e){c&&c.call(d,e.target.error.code)}var e=e||{},r=e.data||f,l=e.onSuccess,c=e.onFail,s=r.fullPath||r,u="file:///storage/emulated/0/",h=s.indexOf(u)>-1?27:0,p=s.lastIndexOf("?"),g=0>p?void 0:p,v=s.slice(h,g);return window.requestFileSystem(LocalFileSystem.PERSISTENT,0,t,o),this}function r(e,t){var t=t||"name";if("string"==typeof e){h=bui.removeArray(e,h,t);var n=h.length?h[h.length-1].data:null;return f=n,h}return this}function l(){return h=[],f=null,h}function c(){return h}function s(){return f}var u=e,d={add:a,remove:r,clear:l,value:s,data:c,toBase64:o,init:i},f=null,h=[];return i(u),d},e}(bui||{},libs),function(e,t){return e["native"].file=function(n,i){function a(e){return window.app&&app.getInfo(function(e){h=e.id||"bui.app",p=h}),v=o(),m=r({root:!0,create:!0}),this}function o(){function e(e){var t="";switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}var i={msg:t};n.reject(i)}var n=t.Deferred();if(g=LocalFileSystem,b=0,window.requestFileSystem&&g)window.requestFileSystem(g[x],b,function(e){n.resolve(e)},e);else{var i={msg:"不支持requestFileSystem"};n.reject(i)}return n}function r(e){var n={folderName:p,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1);var o=l(i.folderName);return o=i.root?o:p+"/"+o,v.done(function(e){e.root.getDirectory(o,i.param,function(t){i.onSuccess&&i.onSuccess.call(w,t,e)},function(e){var t={msg:a+o+" 文件夹失败"};i.onFail&&i.onFail.call(w,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};i.onFail&&i.onFail.call(w,t)}),this}function l(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),l(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function c(e){var t;return e&&e.indexOf("/")>-1?t=e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function s(e){var n={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},i=t.extend({},n,e),a="";if(i.create?(a="创建 ",i.param.create=!0):(a="获取 ",i.param.create=!1),!i.fileName||i.fileName.indexOf(".")<0)return void(i.onFail&&i.onFail());var o=c(i.fileName);return r({root:i.root,folderName:i.folderName,create:!0,onSuccess:function(e,t){var n=e.name==p?e.name+"/"+o:p+"/"+e.name+"/"+o;t.root.getFile(n,i.param,function(e){i.onSuccess&&i.onSuccess.call(w,e,t)},function(e){var t={msg:a+o+" 文件失败"};i.onFail&&i.onFail.call(w,t)})},onFail:function(e){i.onFail&&i.onFail(e)}}),this}function u(e){var n=t.extend(!0,{},e);return r({root:n.root,folderName:n.folderName,create:n.create,onSuccess:function(e,t){e.removeRecursively(function(){n.onSuccess&&n.onSuccess.call(w,e,t)},function(t){var i={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(w,i,e)})},onFail:function(e){var t={msg:"删除 "+n.folderName+" 文件失败"};n.onFail&&n.onFail.call(w,t)}}),this}function d(e){var n=t.extend(!0,{},e);return s({root:n.root,create:n.create,folderName:n.folderName,fileName:n.fileName,onSuccess:function(e,t){e.remove(function(){n.onSuccess&&n.onSuccess.call(w,e,t)},function(t){var i={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(w,i,e)})},onFail:function(e){var t={msg:"删除 "+n.fileName+" 文件失败"};n.onFail&&n.onFail.call(w,t)}}),this}function f(e){var t=e||{};if(t.url)return Cordova.exec(function(e){t.onSuccess&&t.onSuccess.call(w,e)},function(e){t.onFail&&t.onFail.call(w,e)},"ExtendApp","openFile",[t.url,""]),this}var h,p,g,v,m,b,w={getFolder:r,removeFolder:u,getFile:s,getFileName:c,removeFile:d,open:f,init:a},y=n,i=i||{},x="PERSISTENT";i.fileselect,e.debug||0==y["native"];return a(y),w},e}(bui||{},libs),function(e,t){return e["native"].upload=function(e,n){function i(e){e.data&&a(e)}function a(e){var n=t.extend(!0,{},p,e);return f=n.url,d=n.data||m.value(),b=n.showProgress,d?(b&&v.show(),r(n),this):void 0}function o(e){return v&&v.stop(),u&&u.abort(),e&&e.call(g,v,u),this}function r(e){var t=e.onSuccess,n=e.onFail;f=encodeURI(e.url);var i;switch(e.mediaType){case"picture":i=navigator.camera.MediaType.PICTURE;break;case"video":i=navigator.camera.MediaType.VIDEO;break;default:i=navigator.camera.MediaType.ALLMEDIA}var a=new FileUploadOptions;return a.fileKey=e.fileKey,a.mimeType=e.mimeType,a.fileName=d.substr(d.lastIndexOf("/")+1)||"image.jpg",a.params=e.data,a.mediaType=i,u=new FileTransfer,u.onprogress=l,u.upload(d,f,function(e){s();var n=JSON.parse(e.response);t&&t.call(g,n)},function(e){s(),n&&n.call(g,e)},p),this}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);h=t.toString()+"%",100>t?c(h):s(),w&&w.call(g,h)}})}function c(e){return v&&v.show({text:e}),this}function s(){return v&&v.stop(),this}var u,d,f,h,p=e,n=n||{},g={init:i,start:a,stop:o},v=n.loading||function(){},m=n.fileselect||function(){},b=p.showProgress,w=p.onProgress;return i(p),g},e}(bui||{},libs),function(e,t){return e["native"].download=function(n,i){function a(e){return y.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){p=e.fullPath},onFail:function(t){y.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){p=e.fullPath},onFail:function(e){T&&T(e)}})}}),e.url?(o(e),this):void 0}function o(e){var t=e;f=t.url,h=encodeURI(f);t.onProgress;t.showProgress&&x.show({text:"0%"}),g=p+"/"+(e.fileName||y.getFileName(f)),d=new FileTransfer,d.onprogress=l,d.download(h,g,function(e){try{t.onSuccess&&t.onSuccess.call(b,e.fullPath,e,x)}catch(n){console.log(n)}},function(e){s(),t.onFail&&t.onFail.call(b,e,x)},!1,{headers:t.headers})}function r(){s(),d&&d.abort()}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);v=t.toString()+"%",100>t?c(v):s(),k&&k.call(b,v)}})}function c(e){x&&x.show({text:e})}function s(){x&&x.stop()}function u(e){return y.toBase64(e),this}var d,f,h,p,g,v,m={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download","native":!0,onProgress:null,onSuccess:null,onFail:null},b={start:o,stop:r,toBase64:u,init:a},w=b.config=t.extend(!0,{},m,e.config.download,n),i=i||{},y=i.file,x=i.loading,k=(e.debug||0==w["native"],w.showProgress,w.onProgress),T=w.onFail;return a(w),b},e}(bui||{},libs),function(e,t){return e["native"].ready=function(n){var i=t.Deferred();return"undefined"==typeof cordova||"undefined"==typeof app?(e.showLog("请检查页面有没有引入 Cordova.js 及 bingotouch.js"),i.reject()):e.platform.isMac()||e.platform.isWindow()?(e.showLog("调用手机原生功能,需要在debugtool中打开"),i.reject()):e.on("onload",function(t){document.addEventListener("deviceready",function(){n&&n(),e.trigger("pageready"),i.resolve()},!1)}),i},e}(bui||{},libs),function(e,t){return e.init=function(e){var t=function(e){return document.getElementsByTagName(e)[0]||document.getElementById(e)},n=e||document.documentElement.clientHeight;if(t("main")){var i=t("header"),a=t("footer"),o=t("main"),r=i?i.offsetHeight:0,l=a?a.offsetHeight:0,c=n-r-l;return o.style.height=c+"px",this}},window.onload=function(){e.trigger("onload")},t(document).ready(function(){e.trigger("pagebefore"),e.platform.isWindow()||e.platform.isMac()?window.viewport=e.viewport(60):e.platform.isIpad()?window.viewport=e.viewport(70):window.viewport=e.viewport(),e.config.init.auto&&e.init(),"function"==typeof FastClick&&FastClick.attach(document.body),e.trigger("pageinit")}),e}(bui||{},libs);